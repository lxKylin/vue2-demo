(self.webpackChunkvue2_amis=self.webpackChunkvue2_amis||[]).push([["917"],{14898:function(e,n,t){"use strict";t.r(n),t.d(n,{CheckboxesControlRenderer:()=>u,default:()=>p});var o=t(9787),l=t(65758),s=t(29504),i=t.n(s),a=t(47755),c=t(68333),r=t(81415),d=t(66292),h=t.n(d),p=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.checkboxRef=l.createRef(),n.childRefs=[],n}return(0,o.ZT)(n,e),n.prototype.doAction=function(e,n,t){var o,l,s=this.props,i=s.resetValue,c=s.onChange,r=s.formStore,d=s.store,h=s.name,p=null==e?void 0:e.actionType;if("clear"===p)c("");else if("reset"===p){var u=null!=(l=(0,a.E04)(null!=(o=null==r?void 0:r.pristine)?o:null==d?void 0:d.pristine,h))?l:i;c(null!=u?u:"")}},n.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},n.prototype.handleAddClick=function(){var e=this.props.onAdd;e&&e()},n.prototype.handleEditClick=function(e,n){var t=this.props.onEdit;e.preventDefault(),e.stopPropagation(),t&&t(n)},n.prototype.handleDeleteClick=function(e,n){var t=this.props.onDelete;e.preventDefault(),e.stopPropagation(),t&&t(n)},n.prototype.componentDidMount=function(){this.updateBorderStyle();var e=h()(this.updateBorderStyle,100);this.checkboxRef.current&&(this.checkboxRefObserver=new ResizeObserver(e),this.checkboxRefObserver.observe(this.checkboxRef.current))},n.prototype.componentWillUnmount=function(){var e;null==(e=this.checkboxRefObserver)||e.disconnect()},n.prototype.updateBorderStyle=function(){if("button"===this.props.optionType&&this.childRefs.length){var e=this.childRefs.map(function(e){return null==e?void 0:e.ref}),n=e[0].labelRef.current.offsetTop,t=[],o=e.length;t[0]="first";for(var l=0,s=1;s<o;s++){var i=e[s].labelRef.current.offsetTop;t[s]="",i!==n&&(t[s]="first",t[s-1]+=" last",l=s,n=i)}t[o-1]+=" last",t.forEach(function(n,t){t>=l&&(n+=" last-line"),e[t].setClassName(n)})}},n.prototype.renderGroup=function(e,n){var t,o=this,s=this.props,i=s.classnames,a=s.labelField;if(!(null==(t=e.children)?void 0:t.length))return null;var c=e.children.map(function(e,n){return o.renderItem(e,n)}),r=this.columnsSplit(c);return l.createElement("div",{key:"group-"+n,className:i("CheckboxesControl-group",e.className)},l.createElement("label",{className:i("CheckboxesControl-groupLabel",e.labelClassName)},e[a||"label"]),r)},n.prototype.addChildRefs=function(e){e&&this.childRefs.push(e)},n.prototype.renderItem=function(e,n){var t,o=this;if(null==(t=e.children)?void 0:t.length)return this.renderGroup(e,n);var s=this.props,i=s.render,r=s.itemClassName,d=s.onToggle,h=s.selectedOptions,p=s.disabled,u=s.inline,b=s.labelClassName,m=s.labelField,f=s.removable,k=s.editable,C=s.translate,g=s.optionType,y=s.menuTpl,v=s.data,x=s.testIdBuilder,N=String(e[m||"label"]),w=e.labelClassName,E=null==x?void 0:x.getChild("item-"+N);return l.createElement(c.XZ,{className:r,key:n,onChange:function(){return d(e)},checked:!!~h.indexOf(e),disabled:p||e.disabled,inline:u,labelClassName:w||b,description:e.description,optionType:g,testIdBuilder:E,ref:this.addChildRefs},y?i("checkboxes/".concat(n),y,{data:(0,a.nW9)(v,e)}):N,f&&(0,a.rIu)(e,"removable")?l.createElement("a",{"data-tooltip":C("Select.clear"),"data-position":"left"},l.createElement(c.JO,{icon:"minus",className:"icon",onClick:function(n){return o.handleDeleteClick(n,e)}})):null,k&&(0,a.rIu)(e,"editable")?l.createElement("a",{"data-tooltip":"编辑","data-position":"left"},l.createElement(c.JO,{icon:"pencil",className:"icon",onClick:function(n){return o.handleEditClick(n,e)}})):null)},n.prototype.columnsSplit=function(e){var n=this.props,t=n.columnsCount,o=n.classnames,l=[],s=[];return e.forEach(function(e){e&&e.key&&String(e.key).startsWith("group")?(s.length&&(l.push((0,a.UOr)(s,o,t)),s=[]),l.push(e)):s.push(e)}),s.length&&l.push((0,a.UOr)(s,o,t)),l},n.prototype.render=function(){var e=this,n=this.props,t=n.className,s=(n.style,n.disabled),r=n.placeholder,d=n.options,h=n.inline,p=(n.columnsCount,n.selectedOptions),u=(n.onToggle,n.onToggleAll),b=n.checkAll,m=n.checkAllText,f=n.classnames,k=n.itemClassName,C=n.labelClassName,g=n.creatable,y=n.addApi,v=n.createBtnLabel,x=n.translate,N=n.optionType,w=n.loading,E=n.loadingConfig,O=n.themeCss,R=n.id,T=n.env,S=n.classPrefix,B=[];d&&d.length&&(B=d.map(function(n,t){return e.renderItem(n,t)})),b&&B.length&&"default"===N&&B.unshift(l.createElement(c.XZ,{key:"checkall",className:k,onChange:u,checked:!!p.length,partial:i()(p.length,0,(0,a.OOX)(d).length),disabled:s,inline:h,labelClassName:C},null!=m?m:x("Checkboxes.selectAll"))),B=this.columnsSplit(B);var Z=(0,a.ZBW)(O,"checkboxes");return l.createElement("div",{className:f("CheckboxesControl",t,(0,a.GwQ)((0,o.pi)((0,o.pi)({},this.props),{name:["checkboxesControlClassName","checkboxesControlCheckedClassName","checkboxesClassName","checkboxesCheckedClassName","checkboxesInnerClassName","checkboxesShowClassName"],id:R,themeCss:Z}))),ref:this.checkboxRef},B&&B.length?B:w?null:l.createElement("span",{className:"Form-placeholder"},x(r)),w?l.createElement(c.$j,{show:!0,icon:"reload",size:"sm",spinnerClassName:f("Checkboxes-spinner"),loadingConfig:E}):null,(g||y)&&!s?l.createElement("a",{className:f("Checkboxes-addBtn"),onClick:this.handleAddClick},l.createElement(c.JO,{icon:"plus",className:"icon"}),x(v)):null,l.createElement(a.cWM,(0,o.pi)({},this.props,{config:{themeCss:Z,classNames:[{key:"checkboxesControlClassName",weights:{default:{inner:".".concat(S,"Checkbox:not(.checked):not(.disabled)")},hover:{suf:" .".concat(S,"Checkbox:not(.disabled):not(.checked)")},disabled:{inner:".".concat(S,"Checkbox.disabled:not(.checked)")}}},{key:"checkboxesControlCheckedClassName",weights:{default:{inner:".".concat(S,"Checkbox.checked:not(.disabled)")},hover:{suf:" .".concat(S,"Checkbox.checked:not(.disabled)")},disabled:{inner:".".concat(S,"Checkbox.checked.disabled")}}},{key:"checkboxesClassName",weights:{default:{inner:".".concat(S,"Checkbox:not(.checked):not(.disabled) > i")},hover:{suf:" .".concat(S,"Checkbox:not(.disabled):not(.checked)"),inner:"> i"},disabled:{inner:".".concat(S,"Checkbox.disabled:not(.checked) > i")}}},{key:"checkboxesCheckedClassName",weights:{default:{inner:".".concat(S,"Checkbox:not(.disabled) > i")},hover:{suf:" .".concat(S,"Checkbox:not(.disabled)"),inner:"> i"},disabled:{inner:".".concat(S,"Checkbox.disabled > i")}}},{key:"checkboxesInnerClassName",weights:{default:{inner:".".concat(S,"Checkbox:not(.disabled) > i .icon")},hover:{suf:" .".concat(S,"Checkbox:not(.disabled)"),inner:"> i .icon"},disabled:{inner:".".concat(S,"Checkbox.disabled > i .icon")}}},{key:"checkboxesShowClassName",weights:{default:{inner:".".concat(S,"Checkbox > i")}}}],id:R},env:T})))},n.defaultProps={columnsCount:1,multiple:!0,placeholder:"placeholder.noOption",creatable:!1,inline:!0,createBtnLabel:"Select.createLabel",optionType:"default"},(0,o.gn)([a.NjZ,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[]),(0,o.w6)("design:returntype",void 0)],n.prototype,"handleAddClick",null),(0,o.gn)([a.NjZ,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Event,Object]),(0,o.w6)("design:returntype",void 0)],n.prototype,"handleEditClick",null),(0,o.gn)([a.NjZ,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Event,Object]),(0,o.w6)("design:returntype",void 0)],n.prototype,"handleDeleteClick",null),(0,o.gn)([a.NjZ,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[]),(0,o.w6)("design:returntype",void 0)],n.prototype,"updateBorderStyle",null),(0,o.gn)([a.NjZ,(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[Object]),(0,o.w6)("design:returntype",void 0)],n.prototype,"addChildRefs",null),(0,o.gn)([(0,r.i)(),(0,o.w6)("design:type",Function),(0,o.w6)("design:paramtypes",[]),(0,o.w6)("design:returntype",void 0)],n.prototype,"render",null),n}(l.Component),u=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(n,e),n=(0,o.gn)([(0,a.oZB)({type:"checkboxes",sizeMutable:!1,thin:!0})],n)}(p)},57964:function(e){var n=Math.max,t=Math.min;e.exports=function(e,o,l){return e>=t(o,l)&&e<n(o,l)}},29504:function(e,n,t){var o=t(57964),l=t(54474),s=t(12448);e.exports=function(e,n,t){return n=l(n),void 0===t?(t=n,n=0):t=l(t),o(e=s(e),n,t)}}}]);