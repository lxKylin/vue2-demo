"use strict";(self.webpackChunkvue2_amis=self.webpackChunkvue2_amis||[]).push([["3830"],{17049:function(e,t,n){n.r(t),n.d(t,{BaseTabsTransferRenderer:()=>h,TabsTransferRenderer:()=>v});var r=n(9787),i=n(47755),a=n(65758),s=n(33170),l=n.n(s),o=n(68333),u=n(78079),d=n(6423),c=n(81415),p=n(8427),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activeKey:0},t}return(0,r.ZT)(t,e),t.prototype.onTabChange=function(e){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,this.props.dispatchEvent)("tab-change",{key:e})];case 1:if(null==(t=n.sent())?void 0:t.prevented)return[2];return this.setState({activeKey:e}),[2]}})})},t.prototype.handleTabSearch=function(e,t,n){return(0,r.mG)(this,void 0,void 0,function(){var a,s,o,u,d,c,h,v,y,f,g;return(0,r.Jh)(this,function(r){switch(r.label){case 0:if(s=(a=this.props).options,o=a.labelField,u=a.valueField,d=a.env,c=a.data,h=a.searchApi,v=a.translate,!h)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,d.fetcher(h,(0,i.nW9)(c,{term:e}),{cancelExecutor:n})];case 2:if(!(y=r.sent()).ok)throw Error(v(y.msg||"networkError"));if(!Array.isArray(f=y.data.options||y.data.items||y.data))throw Error(v("CRUD.invalidArray"));return[2,f.map(function(e){var t=null,n=e[u||"value"];return Array.isArray(s)&&null!=n&&(t=l()(s,(0,i.IWw)(n,u))),t||e})];case 3:return g=r.sent(),!d.isCancel(g)&&(h.silent||d.notify("error",g.message)),[2,[]];case 4:return[3,6];case 5:if(e)return[2,(0,i.get)(t.children||s,function(t,n,r,i){return!!(Array.isArray(t.children)&&t.children.length||(0,p.Lu)([t].concat(i),e,{keys:[o||"label",u||"value"],threshold:p.Lu.rankings.CONTAINS}).length)},0,!0)];return[2,s];case 6:return[2]}})})},t.prototype.handleChange=function(e,t){return(0,r.mG)(this,void 0,void 0,function(){var n,a,s,l,o,u,d,c,p,h,v,y,f,g;return(0,r.Jh)(this,function(m){switch(m.label){case 0:return a=(n=this.props).onChange,s=n.joinValues,l=n.delimiter,o=n.valueField,u=n.extractValue,d=n.options,c=n.dispatchEvent,p=n.setOptions,h=n.translate,v=e,y=d.concat(),f="UN_MATCH_RESULT",Array.isArray(e)?(v=e.map(function(e){var n=(0,i.L$8)(d,(0,i.IWw)(e[o||"value"],o||"value"));if(n){if(t){var a=(0,i.IMU)(y,n);y=(0,i.o5f)(y,n,1,(0,r.pi)((0,r.pi)({},a),e))}}else{var l=(0,i.L$8)(y,function(e){return e.value===f});if(l){var c=(0,i.IMU)(y,l);(null==c?void 0:c.children)&&(c.children.push(e),y=(0,i.o5f)(y,l,1,(0,r.pi)((0,r.pi)({},c),e)))}else y.push({label:h("searchResult"),value:f,visible:!1,children:[e]})}return s||u?e[o||"value"]:e}),s&&(v=v.join(l||","))):e&&(v=s||u?e[o||"value"]:e),(y.length>d.length||t)&&p(y,!0),[4,c("change",(0,i.vXk)(this.props,{value:v,options:d,items:d}))];case 1:if(null==(g=m.sent())?void 0:g.prevented)return[2];return a(v),[2]}})})},(0,r.gn)([i.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Number]),(0,r.w6)("design:returntype",Promise)],t.prototype,"onTabChange",null),(0,r.gn)([i.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[String,Object,Function]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleTabSearch",null),(0,r.gn)([i.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Boolean]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleChange",null),t}(u.BaseTransferRenderer),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.optionItemRender=function(e,t){var n=this.props,a=n.menuTpl,s=n.render,l=n.data,o=n.classnames,u=arguments[2]||{};return a?s("item/".concat(t.index),a,{data:(0,i.nW9)((0,i.nW9)(l,(0,r.pi)((0,r.pi)({},t),u)),e)}):d.PA.itemRender(e,(0,r.pi)((0,r.pi)({},t),{classnames:o}))},t.prototype.doAction=function(e,t,n,r){void 0===n&&(n=!1);var a,s,l,o=this.props,u=o.resetValue,d=o.onChange,c=o.formStore,p=o.store,h=o.name,v=null==r?void 0:r.activeKey;switch(e.actionType){case"clear":null==d||d("");break;case"reset":null==d||d(null!=(l=null!=(s=(0,i.E04)(null!=(a=null==c?void 0:c.pristine)?a:null==p?void 0:p.pristine,h))?s:u)?l:"");break;case"changeTabKey":this.setState({activeKey:v})}},t.prototype.render=function(){var e=this.props,t=e.className,n=(e.style,e.classnames),r=e.options,s=e.selectedOptions,l=e.sortable,u=e.loading,d=e.searchResultMode,c=e.selectMode,p=e.searchable,h=e.showArrow,v=e.deferLoad,y=e.leftDeferLoad,f=e.disabled,g=e.selectTitle,m=e.resultTitle,b=e.itemHeight,w=e.virtualThreshold,T=e.onlyChildren,C=e.loadingConfig,A=e.valueField,I=e.labelField,R=e.valueTpl,k=e.menuTpl,F=e.data,j=e.mobileUI,E=e.initiallyOpen,L=e.testIdBuilder;return a.createElement("div",{className:n("TabsTransferControl",t)},a.createElement(o.C5,{onlyChildren:T,activeKey:this.state.activeKey,value:s,disabled:f,options:r,onChange:this.handleChange,option2value:this.option2value,sortable:l,searchResultMode:d,onSearch:this.handleTabSearch,showArrow:h,onDeferLoad:v,onLeftDeferLoad:y,selectTitle:g,resultTitle:m,selectMode:c,searchable:p,optionItemRender:k?this.optionItemRender:void 0,resultItemRender:R?this.resultItemRender:void 0,onTabChange:this.onTabChange,itemHeight:(0,i.He2)(b)>0?(0,i.He2)(b):void 0,virtualThreshold:w,labelField:void 0===I?"label":I,valueField:void 0===A?"value":A,ctx:F,mobileUI:j,initiallyOpen:void 0===E||E,testIdBuilder:L}),a.createElement(o.$j,{overlay:!0,key:"info",show:u,loadingConfig:C}))},t.defaultProps={multiple:!0},(0,r.gn)([i.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object]),(0,r.w6)("design:returntype",void 0)],t.prototype,"optionItemRender",null),(0,r.gn)([(0,c.i)(),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[]),(0,r.w6)("design:returntype",void 0)],t.prototype,"render",null),t=(0,r.gn)([(0,i.oZB)({type:"tabs-transfer"})],t)}(h)}}]);