"use strict";(self.webpackChunkvue2_demo=self.webpackChunkvue2_demo||[]).push([["2191"],{75144:function(e,t,n){n.r(t),n.d(t,{ColumnTogglerRenderer:()=>s});var r=n(9787),o=n(65758),i=n(47755),a=n(68333),l=n(92821),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.render=function(){var e=this.props,t=(e.className,e.store,e.render),n=e.classPrefix,s=e.classnames,d=e.tooltip,c=e.align,u=e.cols,p=e.toggleAllColumns,h=e.toggleToggle,m=e.data,f=e.size,y=e.popOverContainer,v=(0,r._T)(e,["className","store","render","classPrefix","classnames","tooltip","align","cols","toggleAllColumns","toggleToggle","data","size","popOverContainer"]),g=v.translate,w=v.env;if(!u)return null;var b=u.filter(function(e){return(0,i.pn4)(e.pristine||e,m)&&!1!==e.toggable}),S=b.filter(function(e){return!1!==e.toggled});return o.createElement(l.Z,(0,r.pi)({},v,{render:t,tooltip:d||g("Table.columnsVisibility"),tooltipContainer:y||w.getModalContainer,isActived:-1!==u.findIndex(function(e){return!e.toggled}),align:null!=c?c:"right",size:f||"sm",classnames:s,classPrefix:n,key:"columns-toggable",columns:u,activeToggaleColumns:S,data:m}),(null==b?void 0:b.length)?o.createElement("li",{className:s("ColumnToggler-menuItem"),key:"selectAll",onClick:function(){p&&p((null==S?void 0:S.length)<=0)}},o.createElement(a.XZ,{size:"sm",classPrefix:n,key:"checkall",checked:!!(null==S?void 0:S.length),partial:!!((null==S?void 0:S.length)&&(null==S?void 0:S.length)!==(null==b?void 0:b.length))},g("Select.checkAll"))):null,null==b?void 0:b.map(function(e,r){return o.createElement("li",{className:s("ColumnToggler-menuItem"),key:"item"+(e.index||r),onClick:function(){h&&h(r)}},o.createElement(a.XZ,{size:"sm",classPrefix:n,checked:!1!==e.toggled},e.title?t("tpl",e.title):e.label||null))}))},t=(0,r.gn)([(0,i.Thl)({type:"column-toggler",name:"column-toggler"})],t)}(o.Component)},59353:function(e,t,n){n.r(t),n.d(t,{TableRenderer:()=>E,default:()=>k});var r=n(9787),o=n(65758),i=n(97326),a=n(23293),l=n(6663),s=n(32222),d=n.n(s),c=n(31223),u=n.n(c),p=n(25956),h=n.n(p),m=n(47755),f=n(68333),y=n(43719),v=function(e){function t(t){var n=e.call(this,t)||this;return n.formItems=[],n.handleSubmit=n.handleSubmit.bind(n),n.handleAction=n.handleAction.bind(n),n}return(0,r.ZT)(t,e),t.prototype.buildSchema=function(){var e,t,n,o,i,a,l,s=this.props,d=s.searchable,c=s.sortable,u=s.name,p=s.label,h=s.translate,m=s.testIdBuilder;if(!0===d?l={title:"",controls:[{type:"text",name:u,placeholder:p,clearable:!0,testid:null==(e=null==m?void 0:m.getChild(u))?void 0:e.getTestIdValue()}]}:d&&(l=d.controls||d.tabs||d.fieldSet?(0,r.pi)((0,r.pi)({title:""},d),{controls:Array.isArray(d.controls)?d.controls.concat():void 0}):(null==d?void 0:d.type)==="form"?d:{title:"",className:d.formClassName,controls:[(0,r.pi)({type:d.type||"text",name:d.name||u,testid:null==(t=null==m?void 0:m.getChild(d.name||u))?void 0:t.getTestIdValue(),placeholder:p},d)]}),l&&l.controls&&c&&l.controls.unshift({type:"hidden",name:"orderBy",value:u},{type:"button-group",name:"order",label:h("sort"),options:[{label:h("asc"),value:"asc"},{label:h("desc"),value:"desc"}]}),l){var f=[];(l.controls||l.body||[]).forEach(function(e){return e.name&&"orderBy"!==e.name&&"order"!==e.name&&f.push(e.name)}),this.formItems=f,l=(0,r.pi)((0,r.pi)({},l),{type:"form",wrapperComponent:"div",wrapWithPanel:!0,title:!1,testid:null==(n=null==m?void 0:m.getChild("form"))?void 0:n.getTestIdValue(),actions:[{type:"button",label:h("reset"),actionType:"clear-and-submit",testid:null==(o=null==m?void 0:m.getChild("btn-reset"))?void 0:o.getTestIdValue()},{type:"button",label:h("cancel"),actionType:"cancel",testid:null==(i=null==m?void 0:m.getChild("btn-cancel"))?void 0:i.getTestIdValue()},{label:h("search"),type:"submit",primary:!0,testid:null==(a=null==m?void 0:m.getChild("btn-search"))?void 0:a.getTestIdValue()}]})}return l||"error"},t.prototype.handleAction=function(e,t,n,o){return(0,r.mG)(this,void 0,void 0,function(){var i,a,l,s,d,c,u;return(0,r.Jh)(this,function(p){switch(p.label){case 0:if(a=(i=this.props).onAction,l=i.data,s=i.dispatchEvent,d=i.name,"cancel"===t.actionType||"close"===t.actionType)return o(),[2];if("reset"===t.actionType)return o(),this.handleReset(),[2];return c=(0,r.pi)({},l),this.formItems.forEach(function(e){return(0,m.NI0)(c,e,void 0)}),[4,s("columnSearch",(0,m.nW9)(l,{searchName:d,searchValue:c}))];case 1:if(null==(u=p.sent())?void 0:u.prevented)return[2];return a&&a(e,t,n),[2]}})})},t.prototype.handleReset=function(){return(0,r.mG)(this,void 0,void 0,function(){var e,t,n,o,i,a;return(0,r.Jh)(this,function(a){switch(a.label){case 0:if(t=(e=this.props).onSearch,n=e.data,o=e.name,i=(0,r.pi)({},n),this.formItems.forEach(function(e){return(0,m.NI0)(i,e,void 0)}),i.orderBy===o&&(i.orderBy="",i.order="asc"),!t)return[3,2];return[4,t(o,i)];case 1:a.sent(),a.label=2;case 2:return t&&t(i),[2]}})})},t.prototype.handleSubmit=function(e,t){return(0,r.mG)(this,void 0,void 0,function(){var n,o,i,a;return(0,r.Jh)(this,function(a){switch(a.label){case 0:if(o=(n=this.props).onSearch,i=n.name,e.order&&(e=(0,r.pi)((0,r.pi)({},e),{orderBy:i})),!o)return[3,2];return[4,o(i,e)];case 1:a.sent(),a.label=2;case 2:return t(),[2]}})})},t.prototype.isActive=function(){var e=this.props,t=e.data,n=e.name,r=e.orderBy;return r&&r===n||this.formItems.some(function(e){return null==t?void 0:t[e]})},t.prototype.render=function(){var e=this,t=this.props,n=t.render,a=t.name,l=t.data,s=t.searchable,d=t.order,c=t.orderBy,u=t.popOverContainer,p=t.classPrefix,h=t.classnames,m=t.testIdBuilder,y=this.buildSchema(),v=this.isActive();return o.createElement(f.MR,{className:"".concat(p,"TableCell-searchBtn"),layerClassName:h("".concat(p,"TableCell-searchPopOver"),s.className),active:v,filterIcon:o.createElement(f.JO,{icon:"search",className:"icon",iconContent:"table-search-icon",testIdBuilder:null==m?void 0:m.getChild("search-icon")}),popOverContainer:u||function(){return(0,i.findDOMNode)(e)},filterDropdown:function(t){t.setSelectedKeys,t.selectedKeys;var o=t.confirm;return t.clearFilters,n("quick-search-form",y,{data:(0,r.pi)((0,r.pi)({},l),{orderBy:c,order:c&&c===a?d:""}),onSubmit:function(t){return e.handleSubmit(t,o)},onAction:function(t,n,r){e.handleAction(t,n,r,o)}})},testIdBuilder:m})},t}(o.Component),g=(0,y.Pi)(function(e){var t=e.store;return o.createElement(v,(0,r.pi)({},e,{data:t.query,orderBy:t.orderBy,order:t.order}))});n(2519);var w=n(120),b=n(23676),S=n(62169),x=n(18266),C=x.pj;function R(){var e=null!==C&&C.apply(this,arguments)||this;return e.propsNeedRemove=["title"],e}(0,r.ZT)(R,C),R.defaultProps=(0,r.pi)((0,r.pi)({},x.pj.defaultProps),{wrapperComponent:"div"}),R=(0,r.gn)([(0,m.Thl)({type:"cell-field",name:"cell-field"}),(0,S.v)(),(0,b.T)(),(0,w.p2)()],R),n(75144);var k=function(e){function t(n,r){var o=e.call(this,n)||this;o.renderedToolbars=[],o.subForms={},o.columns=[],o.reactions=[],r.registerComponent(o);var i=n.store,l=n.columnsTogglable,s=n.columns,d=n.rowSelection,c=n.keyField,u=n.primaryField,p=n.canAccessSuperData;return i.update({columnsTogglable:l,columns:s,canAccessSuperData:p,rowSelectionKeyField:u||(null==d?void 0:d.keyField)||c}),t.syncRows(i,n,void 0)&&o.syncSelected(),o.columns=o.buildColumns(i.filteredColumns,[],[]),o.rowSelection=o.buildRowSelection(),o.expandable=o.buildExpandable(),o.reactions.push((0,a.U5)(function(){return i.currentSelectedRowKeys.join(",")},function(){o.rowSelection=o.buildRowSelection(),o.forceUpdate()})),o.reactions.push((0,a.U5)(function(){return i.currentExpandedKeys.join(",")},function(){o.expandable=o.buildExpandable(),o.forceUpdate()})),o.reactions.push((0,a.U5)(function(){return i.filteredColumns},function(){o.columns=o.buildColumns(i.filteredColumns,[],[]),o.forceUpdate()})),o}return(0,r.ZT)(t,e),t.prototype.componentWillUnmount=function(){this.context.unRegisterComponent(this),this.reactions&&this.reactions.forEach(function(e){return e()})},t.prototype.syncSelected=function(){var e=this.props,t=e.store,n=e.onSelect;n&&n(t.selectedRows.map(function(e){return e.data}),t.unSelectedRows.map(function(e){return e.data}))},t.syncRows=function(e,t,n){var o,i=t.source,a=(0,m.v8S)(t,function(e){return e.items}),l=[],s=!1;if(Array.isArray(a)&&(!n||(0,m.v8S)(n,function(e){return e.items})!==a))s=!0,l=a;else if("string"==typeof i){var d=(0,m.OgC)(i,t.data,"| raw"),c=n?(0,m.OgC)(i,n.data,"| raw"):null;c&&c===d?s=!1:Array.isArray(d)&&(s=!0,l=d)}s&&e.initRows(l,t.getEntryId,t.reUseRow,t.childrenColumnName);var u=[],p=e.keyField;Array.isArray(t.selected)?u=t.selected.map(function(e){return e[p]})||[]:t.rowSelection&&t.rowSelection.selectedRowKeysExpr?l.forEach(function(e,n){var r;(0,m.fz_)((null==(r=t.rowSelection)?void 0:r.selectedRowKeysExpr)||"",{record:e,rowIndex:n})&&u.push(e[p])}):t.rowSelection&&t.rowSelection.selectedRowKeys&&(u=(0,r.ev)([],(0,r.CR)(t.rowSelection.selectedRowKeys),!1)),s&&u.length>0&&e.updateSelected(u);var h=[],f=t.primaryField||(null==(o=t.expandable)?void 0:o.keyField)||t.keyField;return t.expandable&&t.expandable.expandedRowKeysExpr?l.forEach(function(e,n){var r;(0,m.fz_)((null==(r=t.expandable)?void 0:r.expandedRowKeysExpr)||"",{record:e,rowIndex:n})&&h.push(e[f])}):t.expandable&&t.expandable.expandedRowKeys&&(h=(0,r.ev)([],(0,r.CR)(t.expandable.expandedRowKeys),!1)),s&&h.length>0&&e.updateExpanded(h,f),s},t.prototype.componentDidUpdate=function(e){var n,r,o,i=this.props,a=i.store;if((0,m.Vcl)(["orderBy","columnsTogglable","canAccessSuperData"],e,i,function(e){e.orderBy&&!i.onQuery&&delete e.orderBy,a.update(e,{resolveDefinitions:i.resolveDefinitions})}),(0,m.aGv)(["source","value","items"],e,i)||!i.value&&!i.items&&(i.data!==e.data||"string"==typeof i.source&&(0,m.SSQ)(i.source)))t.syncRows(a,i,e)&&this.syncSelected();else if((0,m.RBK)(e.selected,i.selected)){var l=a.keyField,s=a.selectedRows.map(function(e){return e[l]}).join(",");a.updateSelected(i.selected.map(function(e){return e[l]})||[]),s!==a.selectedRows.map(function(e){return e[l]}).join(",")&&this.syncSelected()}(0,m.aGv)(["columns"],e,i)&&a.update({columns:i.columns}),(0,m.aGv)(["rowSelection","selectable","multiple","maxKeepItemSelectionLength"],e,i)&&(this.rowSelection=this.buildRowSelection()),(0,m.aGv)(["query","pageField","perPageField"],e,i)&&a.updateQuery(i.query,void 0,i.pageField,i.perPageField,!0),u()(null==(n=null==e?void 0:e.rowSelection)?void 0:n.keyField,null==(r=i.rowSelection)?void 0:r.keyField)&&u()(e.keyField,i.keyField)||a.update({rowSelectionKeyField:i.primaryField||(null==(o=i.rowSelection)?void 0:o.keyField)||i.keyField})},t.prototype.getPopOverContainer=function(){return(0,i.findDOMNode)(this)},t.prototype.subFormRef=function(e,t,n){var r=this.props.quickEditFormRef;r&&r(e,t,n),this.subForms["".concat(t,"-").concat(n)]=e,e&&this.props.store.addForm(e.props.store,n)},t.prototype.reset=function(){var e=this;this.props.store.reset();var t=[];Object.keys(this.subForms).forEach(function(n){return e.subForms[n]&&t.push(e.subForms[n])}),t.forEach(function(e){return e.clearErrors()})},t.prototype.renderCellSchema=function(e,t){var n=this.props,o=n.render;if(n.store,e&&(0,m.Kn2)(e)){e.width,e.children;var i=e.title,a=(0,r._T)(e,["width","children","title"]);return o("cell-field",(0,r.pi)((0,r.pi)({},a),{title:i||a.label,type:"cell-field",column:a,data:t.data,name:e.name}),t)}return e},t.prototype.renderSchema=function(e,t,n){var o=this.props.render;if(t&&(0,m.Kn2)(t))return o(e||"field",(0,r.pi)((0,r.pi)({},t),{data:null==n?void 0:n.data}),n);if(Array.isArray(t)){var i=[];return t.forEach(function(t,a){return i.push(o(e||"field",(0,r.pi)((0,r.pi)({},t),{data:null==n?void 0:n.data}),(0,r.pi)((0,r.pi)({},n),{key:a})))}),i}return"string"==typeof t?(0,m.hXT)(t,null==n?void 0:n.data):t},t.prototype.buildColumns=function(e,t,n){var i=this,a=this.props,l=a.render,s=a.store,c=a.popOverContainer,u=(a.canAccessSuperData,a.showBadge),p=a.itemBadge,h=a.data,f=a.classnames,y=a.env,v=a.testIdBuilder,w=[];return Array.isArray(e)&&e.forEach(function(e,a){return(0,r.mG)(i,void 0,void 0,function(){var i,b,S,x,C,R,k,E,N,F,A,T,O=this;return(0,r.Jh)(this,function(T){switch(T.label){case 0:if(i=(0,r.pi)({},e),b=null,S=i.title||i.label,x=(0,r.pi)((0,r.pi)({},h),{popOverContainer:c||this.getPopOverContainer}),(0,m.Kn2)(e.title)?b=d()(e.title):"string"==typeof S&&(b={type:"plain",tpl:S}),e.align&&(b.align=e.align,b.className="flex-1"),Object.assign(i,{title:function(t){var n,r=O.renderCellSchema(b,x),i=null;return e.remark&&(i=l("remark",{type:"remark",tooltip:e.remark,container:O.getPopOverContainer})),o.createElement("div",{key:a,className:f("Table-head-cell-wrapper",((n={})["".concat(e.className)]=!!e.className,n["".concat(e.titleClassName)]=!!e.titleClassName,n)),style:{justifyContent:{right:"flex-end",center:"center"}[e.align]||"flex-start"}},r,i,t)}}),C=!!(null==(A=e.children)?void 0:A.length),e.canAccessSuperData,e.type&&Object.assign(i,{render:function(o,i,l,d,h){var f=s.getRowByIndex(l,(0,r.ev)([],(0,r.CR)(h||[]),!1))||{},y=null==v?void 0:v.getChild("row-".concat(l,"-cell-").concat(d)),g={children:O.renderCellSchema(e,{data:f.locals,btnDisabled:s.dragging,popOverContainer:c||O.getPopOverContainer,quickEditFormRef:O.subFormRef,onQuickChange:function(e,t,n,r){O.handleQuickChange(f,e,t,n,r)},row:f,showBadge:u&&0===a,itemBadge:p,testIdBuilder:y}),props:{}};if(!C&&e.rowSpanExpr){var w=+(0,m.hXT)(e.rowSpanExpr,{record:i,rowIndex:l,colIndex:d});w&&(g.props.rowSpan=w,t.push({colIndex:d,rowIndex:l,rowSpan:w}))}if(!C&&e.colSpanExpr){var b=+(0,m.hXT)(e.colSpanExpr,{record:i,rowIndex:l,colIndex:d});b&&(g.props.colSpan=b,n.push({colIndex:d,rowIndex:l,colSpan:b}))}return t.forEach(function(e){d===e.colIndex&&l>e.rowIndex&&l<e.rowIndex+(e.rowSpan||0)&&(g.props.rowSpan=0)}),n.forEach(function(e){l===e.rowIndex&&d>e.colIndex&&d<e.colIndex+(e.colSpan||0)&&(g.props.colSpan=0)}),g}}),e.searchable&&(i.filterDropdown=o.createElement(g,(0,r.pi)({},this.props,{popOverContainer:this.getPopOverContainer,name:e.name,searchable:e.searchable,onSearch:this.handleSearch,key:"th-search-"+a,testIdBuilder:null==v?void 0:v.getChild("head-search-".concat(a))}))),e.sortable&&(i.sorter=!0),!e.filterable)return[3,4];if(!e.filterable.options)return[3,1];return i.filters=e.filterable.options.map(function(e){return"string"==typeof e?{text:e,value:e}:{text:e.label,value:e.value}}),[3,4];case 1:if(!e.filterable.source)return[3,4];if(R=e.filterable.source,!(0,m.SSQ)(R))return[3,2];return k=(0,m.OgC)(R,h,"| raw"),i.filters=k,[3,4];case 2:if(!(0,m.X1t)(R,h))return[3,4];return(E=(0,m._6r)(R)).cache=3e3,[4,y.fetcher(E,h)];case 3:F=(N=T.sent()).data&&N.data.options||[],i.filters=F,T.label=4;case 4:return C&&(i.children=this.buildColumns(e.children,t,n)),w.push(i),[2]}})})}),w},t.prototype.buildSummary=function(e,t){var n=this,r=[];return Array.isArray(t)&&t.forEach(function(t,o){(0,m.Kn2)(t)?r.push({colSpan:t.colSpan,fixed:t.fixed,cellClassName:t.cellClassName,render:function(r){return n.renderSchema(e,t,{data:r})}}):Array.isArray(t)&&(r[o]||r.push([]),t.forEach(function(t){r[o].push({colSpan:t.colSpan,fixed:t.fixed,cellClassName:t.cellClassName,render:function(r){return n.renderSchema(e,t,{data:r})}})}))}),r.length?r:null},t.prototype.rowClassName=function(e,t){var n=this.props,o=n.rowClassNameExpr,i=n.store,a=n.themeCss,l=n.id,s=n.rowClassName,d=[];s&&d.push(s),o&&d.push((0,m.hXT)(o,{record:e,rowIndex:t}));var c=i.getRowByIndex(t);return(null==c?void 0:c.modified)&&d.push("is-modified"),(null==c?void 0:c.moved)&&d.push("is-moved"),d.push((0,m.GwQ)((0,r.pi)((0,r.pi)({},this.props),{name:"tableRowClassname",id:l,themeCss:a}))),d.join(" ")},t.prototype.buildRowSelection=function(){var e=this,t=this.props,n=t.selectable,o=t.multiple,i=t.maxKeepItemSelectionLength,a=t.rowSelection,l=t.store,s=null;if(n)s={type:!1===o?"radio":"",selectedRowKeys:l.currentSelectedRowKeys,maxSelectedLength:i};else if(a){a.selectedRowKeys;var d=a.selections,c=(0,r._T)(a,["selectedRowKeys","selections"]);(s=(0,r.pi)({selectedRowKeys:l.currentSelectedRowKeys,maxSelectedLength:i},c)).getCheckboxProps=function(t,n){var r=e.props,o=r.rowSelection,i=r.maxKeepItemSelectionLength,a=r.store,l=null==o?void 0:o.disableOn;return{disabled:!!l&&(0,m.fz_)(l,{record:t,rowIndex:n})||i&&a.currentSelectedRowKeys.length>=i&&!a.currentSelectedRowKeys.includes(t[a.keyField])}},a.disableOn&&delete s.disableOn,d&&Array.isArray(d)&&(s.selections=[],d.forEach(function(e){s.selections.push({key:e.key,text:e.text,onSelect:function(t){var n=[];n=t.filter(function(t,n){return"all"===e.key||"none"!==e.key&&("invert"===e.key?!l.currentSelectedRowKeys.includes(t):"odd"===e.key?n%2==0:"even"!==e.key||n%2!=0)}),l.updateSelected(n)}})}))}return s},t.prototype.expandedRowClassName=function(e,t){var n=this.props.expandable;return(0,m.hXT)(null==n?void 0:n.expandedRowClassNameExpr,{record:e,rowIndex:t})},t.prototype.expandedRowRender=function(e,t){var n=this.props.expandable;return this.renderSchema("expandableBody",(0,r.pi)({},n),{data:(0,r.pi)((0,r.pi)((0,r.pi)({},this.props.data),e),{rowIndex:t})})},t.prototype.rowExpandable=function(e,t,n){var r=this.props.expandable;return null!=r&&!!r.expandableOn&&(0,m.fz_)(r.expandableOn,{record:e,rowIndex:t})},t.prototype.buildExpandable=function(){var e=this.props,t=e.expandable,n=e.store,o=null;if(t){t.expandedRowKeys;var i=(0,r._T)(t,["expandedRowKeys"]);o=(0,r.pi)({expandedRowKeys:n.currentExpandedKeys},i),t.expandableOn&&(o.rowExpandable=this.rowExpandable,delete o.expandableOn),t&&t.type&&(o.expandedRowRender=this.expandedRowRender),t.expandedRowClassNameExpr&&(o.expandedRowClassName=this.expandedRowClassName,delete o.expandedRowClassNameExpr)}return o},t.prototype.reloadTarget=function(e,t){this.context.reload(e,t)},t.prototype.handleSave=function(){return(0,r.mG)(this,void 0,void 0,function(){var e,t,n,o,i,a,l,s,d,c,u=this;return(0,r.Jh)(this,function(r){switch(r.label){case 0:if(t=(e=this.props).store,n=e.onSave,o=e.primaryField,i=e.keyField,!t.modifiedRows.length)return[2];if(a=[],Object.keys(this.subForms).forEach(function(e){return u.subForms[e]&&a.push(u.subForms[e])}),!a.length)return[3,2];return[4,Promise.all(a.map(function(e){return e.validate()}))];case 1:if(~r.sent().indexOf(!1))return[2];r.label=2;case 2:if(l=t.modifiedRows.map(function(e){return e.data}),s=t.modifiedRows.map(function(e){return e.path}),d=t.modifiedRows.map(function(e){return(0,m.e50)(e.data,e.pristine,[i,o])}),c=t.rows.filter(function(e){return!e.modified}).map(function(e){return e.data}),!n)return this.handleQuickSave(l,d,s,c,t.modifiedRows.map(function(e){return e.pristine})),[2];return n(l,d,s,c,t.modifiedRows.map(function(e){return e.pristine})),[2]}})})},t.prototype.handleQuickSave=function(e,t,n,r,o,i){var a=this,l=this.props,s=l.store,d=l.quickSaveApi,c=l.quickSaveItemApi,u=l.primaryField,p=l.keyField,h=l.env,f=l.messages,y=l.reload,v=l.dispatchEvent;if(Array.isArray(e)){if(!(0,m.X1t)(d)){h&&h.alert("Table2 quickSaveApi is required");return}var g=u||p,w=(0,m.nW9)(s.data,{rows:e,rowsDiff:t,indexes:n,rowsOrigin:o});e.length&&e[0].hasOwnProperty(g)&&(w.ids=e.map(function(e){return e[g]}).join(",")),r&&(w.unModifiedItems=r),s.saveRemote(d,w,{successMessage:f&&f.saveFailed,errorMessage:f&&f.saveSuccess}).then(function(){v("quickSaveSubmitted",w),y&&a.reloadTarget((0,m.u22)(y,w),w)}).catch(function(){})}else{if(!(0,m.X1t)(c)){h&&h.alert("Table2 quickSaveItemApi is required!");return}var b=(0,m.nW9)(s.data,{item:e,modified:t,origin:o}),S=(0,m.nW9)(b,e);s.saveRemote(c,S).then(function(){v("quickSaveSubmitted",S),y&&a.reloadTarget((0,m.u22)(y,b),b)}).catch(function(){(null==i?void 0:i.resetOnFailed)&&a.reset()})}},t.prototype.handleQuickChange=function(e,t,n,r,o){if((0,l.fh)(e)){var i=this.props,a=i.onSave,s=i.onPristineChange,d=i.saveImmediately,c=i.primaryField,u=i.keyField,p=i.quickSaveItemApi;if(e.change(t,r),e.modified&&this.syncSelected(),r){null==s||s(e.data,e.path);return}if(n||d){if(n&&n.api){this.props.onAction&&this.props.onAction(null,{actionType:"ajax",api:n.api,reload:null==o?void 0:o.reload},e.locals);return}if(!a)return void this.handleQuickSave(p?e.data:[e.data],(0,m.e50)(e.data,e.pristine,[u,c]),[e.path],void 0,e.pristine,o);a(e.data,(0,m.e50)(e.data,e.pristine,[u,c]),e.path,void 0,e.pristine,o)}}},t.prototype.handleAction=function(e,t,n){var r=this.props.onAction;r&&r(e,t,n)},t.prototype.renderActions=function(e){var t=this,n=this.props,i=n.actions,a=n.render,l=n.store,s=n.classnames,d=n.data,c=n.columnsTogglable,u=n.dispatchEvent;i=Array.isArray(i)?i.concat():[];var p=(0,m.Kn2)(c)?c:{align:"left"};return l.toggable&&"header"===e&&!~this.renderedToolbars.indexOf("columns-toggler")&&i.push({type:"button",children:a("column-toggler",(0,r.pi)((0,r.pi)({},p),{type:"column-toggler"}),{cols:l.columnsData,toggleAllColumns:function(){l.toggleAllColumns(),u("columnToggled",(0,m.nW9)(d,{columns:l.columnsData.filter(function(e){return e.toggled})}))},toggleToggle:function(e){l.columnsData[e].toggleToggle(),u("columnToggled",(0,m.nW9)(d,{columns:l.columnsData.filter(function(e){return e.toggled})}))}})}),Array.isArray(i)&&i.length?o.createElement("div",{className:s("Table-toolbar")},i.map(function(e,n){return a("action/".concat(n),(0,r.pi)({type:"button"},e),{onAction:t.handleAction,key:n,btnDisabled:l.dragging,data:l.getData(d)})})):null},t.prototype.handleSelected=function(e,t,n){return(0,r.mG)(this,void 0,void 0,function(){var o,i,a,l,s;return(0,r.Jh)(this,function(r){switch(r.label){case 0:return i=(o=this.props).dispatchEvent,a=o.data,l=o.store,[4,i("selectedChange",(0,m.nW9)(a,{selectedItems:e,unSelectedItems:n}))];case 1:if(null==(s=r.sent())?void 0:s.prevented)return[2,null==s?void 0:s.prevented];return l.updateSelected(t),this.syncSelected(),[2]}})})},t.prototype.handleSort=function(e){return(0,r.mG)(this,void 0,void 0,function(){var t,n,o,i,a;return(0,r.Jh)(this,function(r){switch(r.label){case 0:return n=(t=this.props).dispatchEvent,o=t.data,i=t.onSort,[4,n("columnSort",(0,m.nW9)(o,{orderBy:e.orderBy,orderDir:e.orderDir}))];case 1:if(null==(a=r.sent())?void 0:a.prevented)return[2,null==a?void 0:a.prevented];return i&&i(e),[2]}})})},t.prototype.handleFilter=function(e){return(0,r.mG)(this,void 0,void 0,function(){var t,n,o,i,a;return(0,r.Jh)(this,function(r){switch(r.label){case 0:return n=(t=this.props).dispatchEvent,o=t.data,i=t.onSearch,[4,n("columnFilter",(0,m.nW9)(o,e))];case 1:if(null==(a=r.sent())?void 0:a.prevented)return[2,null==a?void 0:a.prevented];return i&&i(e),[2]}})})},t.prototype.handleSearch=function(e,t){return(0,r.mG)(this,void 0,void 0,function(){var n,o,i,a,l,s,d;return(0,r.Jh)(this,function(r){switch(r.label){case 0:return o=(n=this.props).data,i=n.dispatchEvent,a=n.store,l=n.onSearch,[4,i("columnSearch",(0,m.nW9)(o,{searchName:e,searchValue:t}))];case 1:if(null==(s=r.sent())?void 0:s.prevented)return[2];return a.updateQuery(t),l&&l(((d={})[e]=t[e],d)),[2]}})})},t.prototype.handleRowClick=function(e,t,n){return(0,r.mG)(this,void 0,void 0,function(){var o,i,a,l,s;return(0,r.Jh)(this,function(r){switch(r.label){case 0:return i=(o=this.props).dispatchEvent,a=o.data,l=o.onRow,[4,i("rowClick",(0,m.nW9)(a,{item:t,index:n}))];case 1:if(null==(s=r.sent())?void 0:s.prevented)return[2];return t&&l&&l.onRowClick&&l.onRowClick(e,t,n),[2]}})})},t.prototype.handleRowDbClick=function(e,t,n){return(0,r.mG)(this,void 0,void 0,function(){var o,i,a,l,s;return(0,r.Jh)(this,function(r){switch(r.label){case 0:return i=(o=this.props).dispatchEvent,a=o.data,l=o.onRow,[4,i("rowDbClick",(0,m.nW9)(a,{item:t,index:n}))];case 1:if(null==(s=r.sent())?void 0:s.prevented)return[2,!1];return t&&l&&l.onRowDbClick&&l.onRowDbClick(e,t,n),[2,!0]}})})},t.prototype.handleRowMouseEnter=function(e,t,n){var o;return(0,r.mG)(this,void 0,void 0,function(){var i,a,l,s,d;return(0,r.Jh)(this,function(r){switch(r.label){case 0:return null==(o=null==e?void 0:e.persist)||o.call(e),a=(i=this.props).dispatchEvent,l=i.data,s=i.onRow,[4,a("rowMouseEnter",(0,m.nW9)(l,{item:t,index:n}))];case 1:if(null==(d=r.sent())?void 0:d.prevented)return[2];return t&&s&&s.onRowMouseEnter&&s.onRowMouseEnter(e,t,n),[2]}})})},t.prototype.handleRowMouseLeave=function(e,t,n){var o;return(0,r.mG)(this,void 0,void 0,function(){var i,a,l,s,d;return(0,r.Jh)(this,function(r){switch(r.label){case 0:return null==(o=null==e?void 0:e.persist)||o.call(e),a=(i=this.props).dispatchEvent,l=i.data,s=i.onRow,[4,a("rowMouseLeave",(0,m.nW9)(l,{item:t,index:n}))];case 1:if(null==(d=r.sent())?void 0:d.prevented)return[2];return t&&s&&s.onRowMouseLeave&&s.onRowMouseLeave(e,t,n),[2]}})})},t.prototype.handleOrderChange=function(e,t,n){return(0,r.mG)(this,void 0,void 0,function(){var o,i;return(0,r.Jh)(this,function(r){return i=(o=this.props.store).getRowByIndex(e,n),o.exchange(e,t,i),[2]})})},t.prototype.handleSaveOrder=function(){return(0,r.mG)(this,void 0,void 0,function(){var e,t,n,o,i,a,l,s;return(0,r.Jh)(this,function(r){switch(r.label){case 0:return t=(e=this.props).store,n=e.onSaveOrder,o=e.data,i=e.dispatchEvent,a=t.movedRows.map(function(e){return e.data}),l=t.rows.map(function(e){return e.getDataWithModifiedChilden()}),[4,i("orderChange",(0,m.nW9)(o,{movedItems:a}))];case 1:if((null==(s=r.sent())?void 0:s.prevented)||!n||!t.movedRows.length)return[2];return n(a,l),[2]}})})},t.prototype.doAction=function(e,t,n,r){var o=this;void 0===n&&(n=!1);var i=this.props,a=i.store,l=i.data,s=i.keyField,d=i.expandable,c=i.primaryField,u=null==e?void 0:e.actionType,p=a.keyField,h=a.getData(l).items||[];switch(u){case"selectAll":a.updateSelectedAll();break;case"clearAll":a.updateSelected([]);break;case"select":var f=[];h.forEach(function(e,t){(0,m.fz_)((null==r?void 0:r.selected)||(null==r?void 0:r.selectedRowKeysExpr),{record:e,rowIndex:t})&&f.push(e[p])}),a.updateSelected(f);break;case"expand":var y=c||(null==d?void 0:d.keyField)||s,v=[],g=[];if(null==r?void 0:r.value){var w=h.findIndex(function(e){return e[y]===r.value}),b=h[w];this.tableRef&&this.tableRef.isExpandableRow(b,w)&&(this.tableRef.isExpanded(b)?g.push(b):v.push(b))}else(null==r?void 0:r.expandedRowsExpr)&&h.forEach(function(e,t){(0,m.fz_)(null==r?void 0:r.expandedRowsExpr,{record:e,rowIndex:t})&&o.tableRef&&o.tableRef.isExpandableRow(e,t)&&(o.tableRef.isExpanded(e)?g.push(e):v.push(e))});v.length>0&&this.tableRef&&this.tableRef.onExpandRows(v),g.length>0&&this.tableRef&&this.tableRef.onCollapseRows(g);break;default:this.handleAction(void 0,e,l)}},t.prototype.getRef=function(e){this.tableRef=e},t.prototype.renderTable=function(){var e=this.props,t=e.render,n=e.title,i=e.footer,a=(e.rowSelection,e.selectable,e.multiple,e.columns,e.expandable,e.footSummary),l=e.headSummary,s=e.loading,d=e.classnames,c=e.placeholder,u=(e.rowClassNameExpr,e.itemActions),p=e.keyField,h=e.primaryField,y=(e.maxKeepItemSelectionLength,e.onRow),v=e.store,g=e.id,w=e.themeCss,b=(0,r._T)(e,["render","title","footer","rowSelection","selectable","multiple","columns","expandable","footSummary","headSummary","loading","classnames","placeholder","rowClassNameExpr","itemActions","keyField","primaryField","maxKeepItemSelectionLength","onRow","store","id","themeCss"]),S=void 0;if(u){var x=Array.isArray(u)?u.filter(function(e){return!e.hiddenOnHover}):[];if(!x.length)return null;S=function(e,n){return o.createElement("div",{className:d("Table-itemActions")},x.map(function(o,i){return t("itemAction/".concat(i),(0,r.pi)((0,r.pi)({},o),{isMenuItem:!0}),{key:i,item:e,data:e,rowIndex:n})}))}}var C={data:this.props.data};return o.createElement(f.iA,(0,r.pi)({},b,{headerClassName:(0,m.GwQ)((0,r.pi)((0,r.pi)({},this.props),{name:"tableHeadClassname",id:g,themeCss:w})),bodyClassname:(0,m.GwQ)((0,r.pi)((0,r.pi)({},this.props),{name:"tableBodyClassname",id:g,themeCss:w})),onRef:this.getRef,title:this.renderSchema("title",n,C),footer:this.renderSchema("footer",i,C),columns:this.columns,dataSource:v.dataSource,rowSelection:this.rowSelection,rowClassName:this.rowClassName,expandable:this.expandable,footSummary:this.buildSummary("footSummary",a),headSummary:this.buildSummary("headSummary",l),loading:this.renderSchema("loading",s,C),placeholder:this.renderSchema("placeholder",c,C),onSelect:this.handleSelected,onSelectAll:this.handleSelected,onSort:this.handleSort,onFilter:this.handleFilter,onDrag:this.handleOrderChange,itemActions:S,keyField:h||p,onRow:(0,r.pi)((0,r.pi)({},y),{onRowClick:this.handleRowClick,onRowDbClick:this.handleRowDbClick,onRowMouseEnter:this.handleRowMouseEnter,onRowMouseLeave:this.handleRowMouseLeave})}))},t.prototype.renderHeading=function(){var e=this.props,t=e.store,n=e.hideQuickSaveBtn,r=e.classnames,i=e.headingClassName,a=e.saveImmediately,l=e.quickSaveApi,s=e.translate,d=e.columns,c=!1;if(1===t.modifiedRows.length){var u=(null==d?void 0:d.map(function(e){var t;return(null==(t=null==e?void 0:e.quickEdit)?void 0:t.saveImmediately)?null==e?void 0:e.name:""}).filter(function(e){return e}))||[],p=t.modifiedRows[0],y=(0,m.e50)(p.data,p.pristine);h()(u,Object.keys(y)).length&&(c=!0)}return l&&!a&&!c&&t.modified&&!n||t.moved?o.createElement("div",{className:r("Table-heading",i),key:"heading"},a||!t.modified||n||c?t.moved?o.createElement("span",null,s("Table.moved",{moved:t.moved}),o.createElement("button",{type:"button",className:r("Button Button--size-xs Button--success m-l-sm"),onClick:this.handleSaveOrder},o.createElement(f.JO,{icon:"check",className:"icon m-r-xs"}),s("Form.submit")),o.createElement("button",{type:"button",className:r("Button Button--size-xs Button--danger m-l-sm"),onClick:this.reset},o.createElement(f.JO,{icon:"close",className:"icon m-r-xs"}),s("Table.discard"))):"":o.createElement("span",null,s("Table.modified",{modified:t.modified}),o.createElement("button",{type:"button",className:r("Button Button--size-xs Button--success m-l-sm"),onClick:this.handleSave},o.createElement(f.JO,{icon:"check",className:"icon m-r-xs"}),s("Form.submit")),o.createElement("button",{type:"button",className:r("Button Button--size-xs Button--danger m-l-sm"),onClick:this.reset},o.createElement(f.JO,{icon:"close",className:"icon m-r-xs"}),s("Table.discard")))):null},t.prototype.render=function(){var e=this.props,t=e.classnames,n=e.style,i=e.store,a=e.themeCss,l=e.wrapperCustomStyle,s=e.id,d=e.env;this.renderedToolbars=[];var c=this.renderHeading();return o.createElement("div",{className:t("Table-render-wrapper",(0,m.GwQ)((0,r.pi)((0,r.pi)({},this.props),{name:"wrapperCustomStyle",id:s,themeCss:l})),{"Table--unsaved":!!i.modified||!!i.moved}),style:n},this.renderActions("header"),c,this.renderTable(),o.createElement(m.cWM,(0,r.pi)({},this.props,{config:{themeCss:a,classNames:[{key:"tableHeadClassname",weights:{default:{inner:".".concat(t("Table-table")," > thead > tr > th"),important:!0}}},{key:"tableHeadClassname",weights:{default:{inner:"> tr > th",important:!0}}},{key:"tableBodyClassname",weights:{default:{inner:"> tbody.".concat(t("Table-tbody")," > tr  td")},hover:{suf:"> tbody > tr",inner:"td",important:!0}}},{key:"tableRowClassname",weights:{default:{parent:".".concat(t("Table-table")," > tbody.").concat(t("Table-tbody")),inner:"td.".concat(t("Table-cell"))},hover:{parent:".".concat(t("Table-table")," > tbody.").concat(t("Table-tbody")),inner:"td.".concat(t("Table-cell"))}}}],wrapperCustomStyle:l,id:s},env:d})))},t.contextType=m.ZHe,t.propsList=["source","columnsTogglable","columns","items","rowSelection","expandable","sticky","itemBadge","popOverContainer","keyField","childrenColumnName","rowClassNameExpr","lineHeight","bordered","footer","maxKeepItemSelectionLength","keepItemSelectionOnPageChange","itemActions","headingClassName","footSummary","headSummary","saveImmediately","selectable","multiple","primaryField","hideQuickSaveBtn","selected","placeholder","autoFillHeight"],t.defaultProps={keyField:"id",canAccessSuperData:!1,lazyRenderAfter:100},(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[]),(0,r.w6)("design:returntype",void 0)],t.prototype,"getPopOverContainer",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Number,Number]),(0,r.w6)("design:returntype",void 0)],t.prototype,"subFormRef",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[]),(0,r.w6)("design:returntype",void 0)],t.prototype,"reset",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Number]),(0,r.w6)("design:returntype",void 0)],t.prototype,"rowClassName",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Number]),(0,r.w6)("design:returntype",void 0)],t.prototype,"expandedRowClassName",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Number]),(0,r.w6)("design:returntype",void 0)],t.prototype,"expandedRowRender",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Number,Array]),(0,r.w6)("design:returntype",void 0)],t.prototype,"rowExpandable",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleSave",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object,Array,Array,Object,Object]),(0,r.w6)("design:returntype",void 0)],t.prototype,"handleQuickSave",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object,Object,Boolean,Object]),(0,r.w6)("design:returntype",void 0)],t.prototype,"handleQuickChange",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object,Object]),(0,r.w6)("design:returntype",void 0)],t.prototype,"handleAction",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Array,Array,Array]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleSelected",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleSort",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleFilter",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[String,Object]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleSearch",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object,Number]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleRowClick",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object,Number]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleRowDbClick",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object,Number]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleRowMouseEnter",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object,Number]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleRowMouseLeave",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Number,Number,Array]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleOrderChange",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleSaveOrder",null),(0,r.gn)([m.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype",void 0)],t.prototype,"getRef",null),t}(o.Component),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.receive=function(e,t){var n,r,o,i=this.context;return(null==(n=this.props)?void 0:n.host)?null==(o=(r=this.props.host).receive)?void 0:o.call(r,e,t):t?i.send(t,e):void 0},t.prototype.reload=function(e,t,n){var r,o,i,a,l=this.context;return(null==(r=null==l?void 0:l.parent)||r.getComponents(),null==(o=this.props)?void 0:o.host)?null==(a=(i=this.props.host).reload)?void 0:a.call(i,e,t,n):e?l.reload(e,n):void 0},t.prototype.setData=function(e,t,n,o){var i;return(0,r.mG)(this,void 0,void 0,function(){var a,l,s,d,c,u,p;return(0,r.Jh)(this,function(h){switch(h.label){case 0:if(l=(a=this.props.store).data.rows.length,void 0===n)return[3,1];return s=(0,r.ev)([],(0,r.CR)(a.data.rows),!1),String(n).split(",").forEach(function(t){var n=Number(t);s.splice(n,1,e)}),[2,a.updateData({rows:s},void 0,t)];case 1:if(void 0===o)return[3,6];d=(0,r.ev)([],(0,r.CR)(a.data.rows),!1),c=0,h.label=2;case 2:if(!(c<l))return[3,5];return u=d[c],[4,(0,m.Cjz)(o,u)];case 3:h.sent()&&d.splice(c,1,e),h.label=4;case 4:return c++,[3,2];case 5:return[2,a.updateData({rows:d},void 0,t)];case 6:return p=(0,r.pi)((0,r.pi)({},e),{rows:null!=(i=e.rows)?i:e.items}),[2,a.updateData(p,void 0,t)]}})})},t.prototype.getData=function(){var e=this.props,t=e.store,n=e.data;return t.getData(n)},t=(0,r.gn)([(0,m.Thl)({type:"table2",storeType:m.QjV.name,name:"table2",isolateScope:!0})],t)}(k)}}]);