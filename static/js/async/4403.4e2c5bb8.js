"use strict";(self.webpackChunkvue2_demo=self.webpackChunkvue2_demo||[]).push([["4403"],{49324:function(e,r,t){t.r(r),t.d(r,{MappingField:()=>u,MappingFieldRenderer:()=>c,Store:()=>l});var n,a=t(9787),i=t(65758),s=t(47755),o=t(68333),p=t(6663),l=s.kDS.named("MappingStore").props({fetching:!1,errorMsg:"",valueField:"value",map:p.V5.frozen({})}).actions(function(e){return{load:(0,p.ls)(function(r,t,n){var i,o;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,3,4]),e.fetching=!0,[4,r.fetcher(t,n)];case 1:if((i=a.sent()).ok)o=(0,s.Mpd)(i.data),e.setMap(Array.isArray(o.options)?o.options:Array.isArray(o.items)?o.items:Array.isArray(o.records)?o.records:o);else throw Error(i.msg||"fetch error");return[3,4];case 2:return e.errorMsg=a.sent().message,[3,4];case 3:return e.fetching=!1,[7];case 4:return[2]}})}),setMap:function(r){Array.isArray(r)&&(r=r.reduce(function(r,t){if(null==t);else if((0,s.Kn2)(t)){var n=Object.keys(t);1===n.length||2==n.length&&n.includes("$$id")?r[(n=n.filter(function(e){return"$$id"!==e}))[0]]=t[n[0]]:n.length>1&&(r[t[e.valueField]]=t)}return r},{})),(0,s.Kn2)(r)&&(e.map=(0,a.pi)({},r))}}}),u=(0,o.Jt)(function(e){return l.create({id:(0,s.M8z)(),storeType:l.name},e.env)})(((n=function(e){function r(r){var t=e.call(this,r)||this;return r.store.syncProps(r,void 0,["valueField","map"]),t}return(0,a.ZT)(r,e),r.prototype.componentDidMount=function(){this.reload()},r.prototype.componentDidUpdate=function(e){var r=this.props,t=this.props,n=t.store,a=t.source,i=t.data;if(n.syncProps(r,e,a?["valueField"]:["valueField","map"]),(0,s.SSQ)(a)){var o=(0,s.OgC)(e.source,e.data,"| raw"),p=(0,s.OgC)(a,i,"| raw");o!==p&&n.setMap(p)}else(0,s.rMT)(e.source,r.source,e.data,r.data)&&this.reload()},r.prototype.reload=function(){var e,r=this.props,t=r.source,n=r.data,a=r.env,i=this.props.store;if((0,s.SSQ)(t))i.setMap((0,s.OgC)(t,n,"| raw"));else if((0,s.X1t)(t,n)){var o=(0,s._6r)(t,"get");o.cache=null!=(e=o.cache)?e:3e4,i.load(a,o,n)}},r.prototype.renderSingleValue=function(e,r,t){var n,a=this.props,s=a.className,o=a.style,p=a.placeholder,l=a.classnames,u=a.store,c=i.createElement("span",{className:"text-muted"},p),d=u.map,h=void 0;return void 0!==(e="string"==typeof e?e.trim():e)&&d&&void 0!==(h=null!=(n=this.renderValue(d,e))?n:!0===e&&d["1"]?d["1"]:!1===e&&d["0"]?d["0"]:d["*"])&&(c=this.renderViewValue(h,e)),i.createElement("span",{key:"map-".concat(r),className:l("MappingField",s),style:t?o:void 0},c)},r.prototype.renderViewValue=function(e,r){var t=this.props,n=t.render,i=t.itemSchema,o=t.renderViewValue,p=t.data,l=t.labelField,u=t.name;if(o)return o(e,r);if(!i){var c=e;return((0,s.Kn2)(e)&&(c=void 0===l||""===l?e.hasOwnProperty("type")?(0,a.pi)({name:u},c):e.label:e[l||"label"]),(0,s.Kn2)(c)&&"tag"===c.type&&!(0,s.Kn2)(c.label)&&null!=c.label)?n("mapping-tag",c,{value:null}):n("tpl",c)}return n("mappingItemSchema",i,(0,a.pi)({data:(0,s.nW9)(p,(0,s.Kn2)(e)?e:{item:e})},(null==i?void 0:i.type)==="tag"?{value:null}:{}))},r.prototype.renderValue=function(e,r){var t=this.props.renderValue;return t?t(e,r):e[r]},r.prototype.render=function(){var e=this,r=this.props,t=r.style,n=r.defaultValue,a=r.data,o=(0,s.v8S)(this.props);return(n&&(0,s.SSQ)(n)&&n===o&&(o=(0,s.OgC)(n,a,"| raw")),Array.isArray(o))?i.createElement("span",{style:t},o.map(function(r,t){return e.renderSingleValue(r,t)})):this.renderSingleValue(o,0,!0)},r}(i.Component)).defaultProps={placeholder:"-",map:{"*":"通配值"}},n)),c=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(r,e),r.prototype.render=function(){return i.createElement(u,(0,a.pi)({},this.props))},r=(0,a.gn)([(0,s.Thl)({type:"mapping",alias:["map"],name:"mapping"})],r)}(i.Component)}}]);