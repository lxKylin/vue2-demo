"use strict";(self.webpackChunkvue2_demo=self.webpackChunkvue2_demo||[]).push([["848"],{78079:function(e,t,n){n.r(t),n.d(t,{BaseTransferRenderer:()=>v,TransferRender:()=>y,default:()=>f,getCustomFilterOption:()=>g});var r=n(9787),l=n(65758),i=n(33170),a=n.n(i),o=n(19334),s=n.n(o),u=n(6663),p=n(8427),d=n(47755),c=n(68333),h=n(81415),g=function(e){switch(typeof e){case"string":return(0,d.PqP)(e,"options","inputValue","option");case"function":return e;default:return null}},v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.reload=function(){var e=this.props.reloadOptions;null==e||e()},t.prototype.handleChange=function(e,t){return(0,r.mG)(this,void 0,void 0,function(){var n,l,i,a,o,s,u,p,c,h,g,v,y,f,m,w,b,C;return(0,r.Jh)(this,function(O){switch(O.label){case 0:return l=(n=this.props).onChange,i=n.joinValues,a=n.delimiter,o=n.valueField,s=n.extractValue,u=n.options,p=n.dispatchEvent,c=n.setOptions,h=n.selectMode,g=n.deferApi,y=void 0===(v=n.deferField)?"defer":v,f=e,m=u.concat(),Array.isArray(e)?(f=e.map(function(e){var n=(0,d.L$8)(u,(0,d.IWw)(e[o||"value"],o||"value"),{resolve:(0,d.xzo)(o),value:e[o]||"value"});if(n){if(t){var l=(0,d.IMU)(m,n);m=(0,d.o5f)(m,n,1,(0,r.pi)((0,r.pi)({},l),e))}}else m.push((0,r.pi)((0,r.pi)({},e),{visible:!1}));return i||s?e[o||"value"]:e}),i&&(f=f.join(a||","))):e&&(f=i||s?e[o||"value"]:e,(w=(0,d.L$8)(u,(0,d.IWw)(e[o||"value"],o||"value")))?t&&(b=(0,d.IMU)(m,w),m=(0,d.o5f)(m,w,1,(0,r.pi)((0,r.pi)({},b),e))):m.push((0,r.pi)((0,r.pi)({},e),{visible:!1}))),(!0==("tree"===h&&(!!g||!!(0,d.hEs)(u,function(e){return e.deferApi||e[y]})))||m.length>u.length||t)&&c(m,!0),[4,p("change",(0,d.vXk)(this.props,{value:f,options:u,items:u}))];case 1:if(null==(C=O.sent())?void 0:C.prevented)return[2];return l(f),[2]}})})},t.prototype.option2value=function(e){return e},t.prototype.getResult=function(e){return e.data.options||e.data.items||e.data},t.prototype.handleSearch=function(e,t,n){return(0,r.mG)(this,void 0,void 0,function(){var l,i,o,s,u,c,h,v,y,f,m,w,b,C,O;return(0,r.Jh)(this,function(R){switch(R.label){case 0:if(i=(l=this.props).searchApi,o=l.options,s=l.labelField,u=l.valueField,c=l.env,h=l.data,v=l.translate,y=l.filterOption,!i)return[3,5];R.label=1;case 1:return R.trys.push([1,3,,4]),[4,c.fetcher(i,(0,d.nW9)(h,(0,r.pi)({term:e},n||{})),{cancelExecutor:t})];case 2:if(!(f=R.sent()).ok)throw Error(v(f.msg||"networkError"));if(!Array.isArray(m=this.getResult(f)))throw Error(v("CRUD.invalidArray"));return w={},n&&(w={page:f.data.page,perPage:n.perPage,total:f.data.count}),[2,(0,r.pi)({items:(0,d.GyU)(m,function(e){var t=null,n=e[u||"value"];return Array.isArray(o)&&null!=n&&(t=a()(o,(0,d.IWw)(n,u)),(null==e?void 0:e.children)&&(t=(0,r.pi)((0,r.pi)({},t),{children:e.children}))),t||e})},w)];case 3:return b=R.sent(),c.isCancel(b)||i.silent||c.notify("error",b.message),[2,{items:[]}];case 4:return[3,6];case 5:if(!e)return[2,{items:o}];if(C={keys:[s||"label",u||"value"]},y){if(O=g(y))return[2,{items:O(o,e,C)}];return c.notify("error","自定义检索函数不符合要求"),[2,{items:[]}]}return[2,{items:(0,d.get)(o,function(t,n,r,l){return!!(Array.isArray(t.children)&&t.children.length||(0,p.Lu)([t].concat(l),e,{keys:[s||"label",u||"value"],threshold:p.Lu.rankings.CONTAINS}).length)},0,!0)}];case 6:return[2]}})})},t.prototype.handleResultSearch=function(e,t){var n=this.props,r=n.valueField,l=n.labelField,i=(0,d.EvO)(e),a=t[l||"label"],o=t[r||"value"];return i.test(a)||i.test(o)},t.prototype.handlePageChange=function(e,t,n){var l=this.props,i=l.source,a=l.data,o=l.formItem,s=l.onChange,p=(0,d.nW9)(a,(0,r.pi)({page:null!=e?e:1,perPage:null!=t?t:10},n?{pageDir:n}:{}));o&&(0,u.fh)(o)&&((0,d.SSQ)(i)?o.loadOptionsFromDataScope(i,p,s):(0,d.X1t)(i,p)&&o.loadOptions(i,p,void 0,!1,s,!1))},t.prototype.optionItemRender=function(e,t){var n=this.props,r=n.menuTpl,l=n.render,i=n.data;return l("item/".concat(t.index),r,{data:(0,d.nW9)((0,d.nW9)(i,t),e)})},t.prototype.resultItemRender=function(e,t){var n=this.props,r=n.valueTpl,l=n.render,i=n.data;return l("value/".concat(t.index),r,{onChange:t.onChange,data:(0,d.nW9)((0,d.nW9)(i,t),e)})},t.prototype.renderCell=function(e,t,n,l){var i=this.props,a=i.render,o=i.data,s=i.classnames,u=i.showInvalidMatch;return a("cell/".concat(n,"/").concat(l),(0,r.pi)({type:"text",className:s({"is-invalid":!!u&&(null==t?void 0:t.__unmatched)})},e),{value:(0,d.H_J)(e.name,t),data:(0,d.nW9)(o,t)})},t.prototype.getRef=function(e){for(;e&&e.getWrappedInstance;)e=e.getWrappedInstance();this.tranferRef=e},t.prototype.onSelectAll=function(e){var t=this.props,n=t.dispatchEvent,r=t.data;n("selectAll",(0,d.nW9)(r,{items:e}))},t.prototype.doAction=function(e,t,n){var r,l,i,a,o,s=this.props,u=s.resetValue,p=s.onChange,c=s.formStore,h=s.store,g=s.name;switch(e.actionType){case"clear":null==p||p("");break;case"reset":null==p||p(null!=(i=null!=(l=(0,d.E04)(null!=(r=null==c?void 0:c.pristine)?r:null==h?void 0:h.pristine,g))?l:u)?i:"");break;case"selectAll":null==(a=this.tranferRef)||a.selectAll();break;case"clearSearch":null==(o=this.tranferRef)||o.clearSearch(t)}},t.prototype.render=function(){var e,t,n=this.props,i=n.className,a=(n.style,n.classnames),o=n.selectedOptions,u=n.showArrow,p=n.sortable,h=n.selectMode,g=n.columns,v=n.loading,y=n.searchable,f=n.searchResultMode,m=n.searchResultColumns,w=n.deferLoad,b=n.leftMode,C=n.rightMode,O=n.disabled,R=n.selectTitle,S=n.resultTitle,F=n.menuTpl,A=n.valueTpl,j=n.searchPlaceholder,I=n.resultListModeFollowSelect,N=n.resultSearchPlaceholder,P=n.resultSearchable,T=n.statistics,M=n.labelField,k=n.valueField,Z=n.virtualThreshold,E=n.itemHeight,W=n.loadingConfig,x=n.showInvalidMatch,B=n.onlyChildren,L=n.mobileUI,D=n.noResultsText,U=n.pagination,V=n.formItem,_=n.env,H=n.popOverContainer,G=n.data,J=n.autoCheckChildren,$=n.initiallyOpen,z=n.testIdBuilder,X=this.props,q=X.options,Q=X.leftOptions,K=X.leftDefaultValue;return"associated"===h&&q&&q.length&&q[0].leftOptions&&Array.isArray(q[0].children)&&(Q=q[0].leftOptions,K=null!=(e=q[0].leftDefaultValue)?e:K,q=q[0].children),l.createElement("div",{className:a("TransferControl",i)},l.createElement(c.FE,{onlyChildren:B,value:o,options:q,accumulatedOptions:null!=(t=null==V?void 0:V.accumulatedOptions)?t:[],disabled:O,onChange:this.handleChange,option2value:this.option2value,sortable:p,showArrow:u,selectMode:h,searchResultMode:f,searchResultColumns:m,columns:g,onSearch:y?this.handleSearch:void 0,onDeferLoad:w,leftOptions:Q,leftMode:b,rightMode:C,cellRender:this.renderCell,selectTitle:R,resultTitle:S,resultListModeFollowSelect:void 0!==I&&I,onResultSearch:this.handleResultSearch,searchPlaceholder:j,resultSearchable:void 0!==P&&P,resultSearchPlaceholder:N,statistics:T,labelField:M,valueField:k,optionItemRender:F?this.optionItemRender:void 0,resultItemRender:A?this.resultItemRender:void 0,onSelectAll:this.onSelectAll,onRef:this.getRef,virtualThreshold:Z,itemHeight:(0,d.He2)(E)>0?(0,d.He2)(E):void 0,loadingConfig:W,showInvalidMatch:x,mobileUI:L,noResultsText:D,pagination:(0,r.pi)((0,r.pi)({},s()(U,["className","layout","perPageAvailable","popOverContainerSelector"])),{enable:(U&&void 0!==U.enable?!!("string"==typeof U.enable?(0,d.fz_)(U.enable,G):U.enable):!!(null==V?void 0:V.enableSourcePagination))&&(!h||"list"===h||"table"===h)&&q.length>0,maxButtons:Number.isInteger(null==U?void 0:U.maxButtons)?U.maxButtons:5,page:null==V?void 0:V.sourcePageNum,perPage:null==V?void 0:V.sourcePerPageNum,total:null==V?void 0:V.sourceTotalNum,popOverContainer:null!=H?H:null==_?void 0:_.getModalContainer}),onPageChange:this.handlePageChange,initiallyOpen:void 0===$||$,autoCheckChildren:void 0===J||J,testIdBuilder:z}),l.createElement(c.$j,{overlay:!0,key:"info",loadingConfig:W,show:v}))},t.defaultProps={multiple:!0},(0,r.gn)([d.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Boolean]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleChange",null),(0,r.gn)([d.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype",void 0)],t.prototype,"option2value",null),(0,r.gn)([d.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype",void 0)],t.prototype,"getResult",null),(0,r.gn)([d.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[String,Function,Object]),(0,r.w6)("design:returntype",Promise)],t.prototype,"handleSearch",null),(0,r.gn)([d.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[String,Object]),(0,r.w6)("design:returntype",void 0)],t.prototype,"handleResultSearch",null),(0,r.gn)([d.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Number,Number,String]),(0,r.w6)("design:returntype",void 0)],t.prototype,"handlePageChange",null),(0,r.gn)([d.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object]),(0,r.w6)("design:returntype",void 0)],t.prototype,"optionItemRender",null),(0,r.gn)([d.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object]),(0,r.w6)("design:returntype",void 0)],t.prototype,"resultItemRender",null),(0,r.gn)([d.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Object,Number,Number]),(0,r.w6)("design:returntype",void 0)],t.prototype,"renderCell",null),(0,r.gn)([d.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype",void 0)],t.prototype,"getRef",null),(0,r.gn)([d.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Array]),(0,r.w6)("design:returntype",void 0)],t.prototype,"onSelectAll",null),(0,r.gn)([(0,h.i)(),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[]),(0,r.w6)("design:returntype",void 0)],t.prototype,"render",null),t}(l.Component),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t}(v),f=(0,d.oZB)({type:"transfer"})(y)}}]);