"use strict";(self.webpackChunkvue2_demo=self.webpackChunkvue2_demo||[]).push([["3385"],{46609:function(t,e,n){n.r(e),n.d(e,{NumberControlRenderer:()=>h,default:()=>c});var i=n(9787),r=n(65758),o=n(79541),s=n(47755),a=n(84875),u=n.n(a),l=n(68333),p=n(81415),c=function(t){function e(e){var n=t.call(this,e)||this;n.handleChange=n.handleChange.bind(n),n.handleChangeUnit=n.handleChangeUnit.bind(n);var i=n.getUnit(),r=(0,s.GRe)(e.unitOptions),o=e.formItem,a=e.value;return o&&n.formatNumber(a,!0),n.state={unit:i,unitOptions:r},n}return(0,i.ZT)(e,t),e.prototype.doAction=function(t,e,n,i){void 0===n&&(n=!1);var r,o,a=null==t?void 0:t.actionType,u=this.props,p=u.min,c=u.max,h=u.precision,d=u.step,f=u.resetValue,m=u.big,v=u.onChange,g=u.clearValueOnEmpty,y=u.formStore,b=u.store,N=u.name;if("clear"===a)null==v||v(g?void 0:"");else if("reset"===a){var C=l.Y2.normalizePrecision(this.filterNum(h),this.filterNum(d)),w=null!=(o=(0,s.E04)(null!=(r=null==y?void 0:y.pristine)?r:null==b?void 0:b.pristine,N))?o:f,O=l.Y2.normalizeValue(null!=w?w:"",this.filterNum(p,m),this.filterNum(c,m),C,null!=w?w:"",g,m);null==v||v(g&&""===O?void 0:O)}},e.prototype.formatNumber=function(t,e){void 0===e&&(e=!1);var n=this.props,i=n.showAsPercent,r=n.suffix,a=n.step,u=n.big,p=n.setPrinstineValue,c=this.props.precision;i&&"%"===r&&(c=(c||0)+2);var h=this.getUnit(),d=(0,s.GRe)(this.props.unitOptions),f=l.Y2.normalizePrecision(this.filterNum(c),this.filterNum(a));if(null!=t&&null!=f&&(!h||0===d.length)&&!0!==u){var m=parseFloat((0,o.FH)(t.toString(),".",f));!isNaN(m)&&m!==t&&(t=m,e&&p(m))}return t},e.prototype.getUnit=function(){var t,e,n=this.props;if(n.unitOptions&&n.unitOptions.length){var r=(0,s.GRe)(n.unitOptions).map(function(t){return t.value});if(!n.value||"string"!=typeof n.value)return r[0];var o=r[0];r.sort(function(t,e){return e.length-t.length});try{for(var a=(0,i.XA)(r),u=a.next();!u.done;u=a.next()){var l=u.value;if(n.value.endsWith(l)){o=l;break}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return o}},e.prototype.getValue=function(t){var e=this.props,n=e.resetValue,i=e.unitOptions;if(!t||"number"==typeof t||"string"==typeof t)return null!==t&&i&&this.state.unit&&(t+=String(this.state.unit)),null===t?null!=n?n:null:t},e.prototype.dispatchEvent=function(t){return(0,i.mG)(this,void 0,void 0,function(){var e,n,r;return(0,i.Jh)(this,function(i){return n=(e=this.props).dispatchEvent,r=e.value,n(t,(0,s.vXk)(this.props,{value:r})),[2]})})},e.prototype.handleChange=function(t){return(0,i.mG)(this,void 0,void 0,function(){var e,n,r,o,a,u,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return n=(e=this.props).onChange,r=e.dispatchEvent,o=e.clearValueOnEmpty,a=this.getValue(t),u=o&&""===a?void 0:a,u=this.formatNumber(u),[4,r("change",(0,s.vXk)(this.props,{value:u}))];case 1:if(null==(l=i.sent())?void 0:l.prevented)return[2];return n(u),[2]}})})},e.prototype.changeCursorPos=function(t){if(!isNaN(t)){var e,n,i=this.props,r=i.kilobitSeparator,o=i.prefix,s=t>0?Math.floor(t):Math.ceil(t),a="".concat(t).length;if(o&&(a+=o.length),r){var u=Math.floor(("".concat(Math.abs(s)).length-1)/3);u>0&&(a+=u)}this.input&&(r||o)&&(null==(n=(e=this.input).setSelectionRange)||n.call(e,a,a))}},e.prototype.filterNum=function(t,e){if(void 0===e&&(e=!1),void 0!==t)return"number"!=typeof t&&(t=(0,s.hXT)(t,this.props.data),t=/^[-]?\d+/.test(t)?e?t:+t:void 0),t},e.prototype.handleChangeUnit=function(t){var e=this,n=this.props.value,i=this.state.unit;this.setState({unit:t.value},function(){n&&(n=n.toString().replace(i,""),e.props.onChange(n+e.state.unit))})},e.prototype.componentDidUpdate=function(t){var e=this.getUnit(),n=this.props,i=n.value,r=n.formInited,o=n.onChange,a=n.setPrinstineValue;if(null!=i&&("string"==typeof i||"number"==typeof i)&&e&&!String(i).endsWith(e)){var u=this.getValue(i);!1===r?null==a||a(u):null==o||o(u)}this.props.value!==t.value&&/^([-+]?(([1-9]\d*\.?\d*)|(0\.\d*[1-9]))[^\d\.]*)$/.test(this.props.value)&&this.setState({unit:e}),this.props.unitOptions!==t.unitOptions&&this.setState({unitOptions:(0,s.GRe)(this.props.unitOptions)})},e.prototype.inputRef=function(t){this.input=t},e.prototype.focus=function(){this.input&&this.input.focus()},e.prototype.render=function(){var t,e=this,n=this.props,o=n.className,a=n.style,p=n.classPrefix,c=n.value,h=n.step,d=n.precision,f=n.max,m=n.min,v=n.disabled,g=n.placeholder,y=n.showSteps,b=n.borderMode,N=n.suffix,C=n.prefix,w=n.kilobitSeparator,O=n.unitOptions,E=n.readOnly,S=n.keyboard,V=n.displayMode,P=n.big,x=n.resetValue,k=n.clearValueOnEmpty,M=n.css,R=n.themeCss,U=n.inputControlClassName,G=n.id,A=n.env,F=n.name,Z=n.showAsPercent,j=n.testIdBuilder,T=n.popOverContainer,W=this.state.unit,B=this.filterNum(d),I=w||C||N?function(t,n){var i,r=n.userTyping,o=n.input;if(w&&t)if(r||e.input===document.activeElement){var a=t.toString().split(".");a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t=a.join(".")}else t=(0,s.V2q)(t,B);return N&&r&&(null==(i=e.input)?void 0:i.selectionStart)===o.length?"".concat(C||"").concat(t):"".concat(C||"").concat(t).concat(N||"")}:void 0,X=W&&c&&"string"==typeof c?c.replace(W,""):isNaN(c)?void 0:c;return r.createElement("div",{className:u()("".concat(p,"NumberControl"),((t={})["".concat(p,"NumberControl--withUnit")]=O,t),o),style:a},r.createElement(l.Y2,{name:F,inputControlClassName:u()(U,(0,s.GwQ)((0,i.pi)((0,i.pi)({},this.props),{name:"inputControlClassName",id:G,themeCss:R||M})),(0,s.GwQ)((0,i.pi)((0,i.pi)({},this.props),{name:"inputControlClassName",id:G,themeCss:R||M,extra:"inner"}))),inputRef:this.inputRef,value:X,resetValue:x,step:h,max:this.filterNum(f,P),min:this.filterNum(m,P),formatter:I,parser:function(t){return t&&(C&&(t=t.replace(C,"")),N&&(t=t.replace(N,"")),w&&(t=t.replace(/,/g,""))),t},onChange:this.handleChange,disabled:v,placeholder:g,precision:B,showSteps:y,borderMode:b,readOnly:E,suffix:N,showAsPercent:Z,onFocus:function(){return e.dispatchEvent("focus")},onBlur:function(){return e.dispatchEvent("blur")},keyboard:S,displayMode:V,big:P,clearValueOnEmpty:k,testIdBuilder:j}),Array.isArray(O)&&0!==O.length?O.length>1?r.createElement(l.Ph,{value:W,clearable:!1,options:this.state.unitOptions||[],onChange:this.handleChangeUnit,className:"".concat(p,"NumberControl-unit"),disabled:v,popOverContainer:T}):r.createElement("div",{className:u()("".concat(p,"NumberControl-unit"),"".concat(p,"NumberControl-single-unit"),"".concat(p,"Select"),"".concat(E?"".concat(p,"NumberControl-readonly"):""))},"string"==typeof O[0]?O[0]:O[0].label):null,r.createElement(s.cWM,(0,i.pi)({},this.props,{config:{themeCss:R||M,classNames:[{key:"inputControlClassName",weights:{focused:{pre:"".concat(p,"Number-").concat(V?V+"-":"","focused.")},disabled:{pre:"".concat(p,"Number-").concat(V?V+"-":"","disabled.")}}}],id:G},env:A})),r.createElement(s.cWM,(0,i.pi)({},this.props,{config:{themeCss:(0,s.$4Z)(R||M),classNames:[{key:"inputControlClassName",weights:{default:{inner:"input"},hover:{inner:"input"},focused:{pre:"".concat(p,"Number-").concat(V?V+"-":"","focused."),inner:"input"},disabled:{pre:"".concat(p,"Number-").concat(V?V+"-":"","disabled."),inner:"input"}}}],id:G&&G+"-inner"},env:A})))},e.defaultProps={step:1,resetValue:"",clearValueOnEmpty:!1},(0,i.gn)([s.NjZ,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[String]),(0,i.w6)("design:returntype",Promise)],e.prototype,"dispatchEvent",null),(0,i.gn)([s.NjZ,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[Number]),(0,i.w6)("design:returntype",void 0)],e.prototype,"changeCursorPos",null),(0,i.gn)([s.NjZ,(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[Object]),(0,i.w6)("design:returntype",void 0)],e.prototype,"inputRef",null),(0,i.gn)([(0,p.i)(),(0,i.w6)("design:type",Function),(0,i.w6)("design:paramtypes",[]),(0,i.w6)("design:returntype",void 0)],e.prototype,"render",null),e}(r.Component),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.defaultProps=(0,i.pi)({validations:"isNumeric"},c.defaultProps),e=(0,i.gn)([(0,s.xJW)({type:"input-number",detectProps:["unitOptions","precision","suffix"]})],e)}(c)}}]);