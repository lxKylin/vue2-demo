"use strict";(self.webpackChunkvue2_amis=self.webpackChunkvue2_amis||[]).push([["2725"],{56270:function(e,t,n){n.r(t),n.d(t,{UserSelectControlRenderer:()=>h,default:()=>d});var r=n(9787),a=n(65758),i=n(84875),o=n.n(i),s=n(47755),l=n(68333),u=n(33170),c=n.n(u),p=n(81415),d=function(e){function t(t){return e.call(this,t)||this}return(0,r.ZT)(t,e),t.prototype.componentWillUnmount=function(){this.unHook&&this.unHook()},t.prototype.onSearch=function(e,t,n){return(0,r.mG)(this,void 0,void 0,function(){var a,i,o,l,u,c,p,d,h;return(0,r.Jh)(this,function(f){switch(f.label){case 0:if(i=(a=this.props).searchApi,o=a.setLoading,l=a.env,i=(null==n?void 0:n.searchApi)||i,u=(null==n?void 0:n.searchTerm)||this.props.searchTerm||"term",c=(null==n?void 0:n.searchParam)||this.props.searchParam||{},p=(0,r.pi)(((h={})[u]=e,h),c),!(0,s.X1t)(i,p))return[2,Promise.resolve([])];o(!0),f.label=1;case 1:return f.trys.push([1,,3,4]),[4,l.fetcher(i,p,{cancelExecutor:t,autoAppend:!0})];case 2:return[2,(d=f.sent()).data&&d.data.options||d.data||[]];case 3:return o(!1),[7];case 4:return[2]}})})},t.prototype.deferLoad=function(e,t,n){return(0,r.mG)(this,void 0,void 0,function(){var a,i,o,l,u,c,p;return(0,r.Jh)(this,function(r){switch(r.label){case 0:if(i=(a=this.props).env,o=a.deferApi,l=a.setLoading,a.formInited,a.addHook,o=(null==n?void 0:n.deferApi)||o,!i||!i.fetcher)throw Error("fetcher is required");if(u=(0,s.nW9)(e,{}),!(0,s.X1t)(o,u))return[2,Promise.resolve([])];r.label=1;case 1:return r.trys.push([1,,3,4]),[4,i.fetcher(o,u)];case 2:return p=(c=r.sent()).data&&c.data.options||c.data||[],t&&p.forEach(function(e){e.isRef=!0}),[2,p];case 3:return l(!1),[7];case 4:return[2]}})})},t.prototype.changeValue=function(e){return(0,r.mG)(this,void 0,void 0,function(){var t,n,a,i,o,l,u,p,d,h,f,v;return(0,r.Jh)(this,function(r){switch(r.label){case 0:return n=(t=this.props).joinValues,a=t.extractValue,i=t.delimiter,o=t.multiple,l=t.valueField,u=t.onChange,p=t.options,t.setOptions,t.data,d=t.dispatchEvent,h=e,f=[],(Array.isArray(e)?e:e?[e]:[]).forEach(function(e){c()(p,function(t){return t[l||"value"]==e[l||"value"]})||f.push(e)}),n?h=o?Array.isArray(e)?e.map(function(e){return e[l||"value"]}).join(i):e?e[l||"value"]:"":h?h[l||"value"]:"":a&&(h=o?Array.isArray(e)?e.map(function(e){return e[l||"value"]}):e?[e[l||"value"]]:[]:h?h[l||"value"]:""),[4,d("change",(0,s.vXk)(this.props,{value:h,options:p,items:p}))];case 1:if(null==(v=r.sent())?void 0:v.prevented)return[2];return u(h),[2]}})})},t.prototype.renderStatic=function(){var e=this.props,t=e.selectedOptions,n=e.labelField,r=void 0===n?"label":n,i=e.classnames;return"avatar"===r?t.map(function(e,t){return a.createElement("img",{key:t,className:i("UserSelect-avatar-img"),src:e[r],alt:""})}):t.map(function(e){return e[r]}).join(",")},t.prototype.render=function(){var e=this,t=this.props,n=t.showNav,r=t.navTitle,i=t.searchable,s=t.options,u=t.className,c=(t.style,t.selectedOptions),p=t.tabOptions,d=t.multi,h=t.multiple,f=t.isDep,v=t.isRef,m=t.placeholder,y=t.searchPlaceholder,g=t.tabMode,b=t.data,w=t.displayFields,F=t.labelField,S=t.loadingConfig,A=t.disabled;return null==p||p.forEach(function(t){t.deferLoad=e.deferLoad,t.onChange=e.changeValue,t.onSearch=e.onSearch}),a.createElement("div",{className:o()("UserSelectControl",u)},g?a.createElement(l._f,{selection:c,tabOptions:p,multiple:h,displayFields:w,onChange:this.changeValue,onSearch:this.onSearch,deferLoad:this.deferLoad,data:b,disabled:A}):a.createElement(l.oF,{loadingConfig:S,showNav:n,navTitle:r,selection:c,options:s,multi:d,multiple:h,searchable:i,placeholder:m,searchPlaceholder:y,deferLoad:this.deferLoad,onChange:this.changeValue,onSearch:this.onSearch,displayFields:w,labelField:F,isDep:f,isRef:v,disabled:A}))},t.defaultProps={showNav:!0},(0,r.gn)([s.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[String,Function,Object]),(0,r.w6)("design:returntype",Promise)],t.prototype,"onSearch",null),(0,r.gn)([s.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object,Boolean,Object]),(0,r.w6)("design:returntype",Promise)],t.prototype,"deferLoad",null),(0,r.gn)([s.NjZ,(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[Object]),(0,r.w6)("design:returntype",Promise)],t.prototype,"changeValue",null),(0,r.gn)([(0,p.i)(),(0,r.w6)("design:type",Function),(0,r.w6)("design:paramtypes",[]),(0,r.w6)("design:returntype",void 0)],t.prototype,"render",null),t}(a.Component),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t=(0,r.gn)([(0,s.oZB)({type:"users-select"})],t)}(d)}}]);