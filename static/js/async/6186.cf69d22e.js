(self.webpackChunkvue2_amis=self.webpackChunkvue2_amis||[]).push([["6186"],{93630:function(e,t,r){"use strict";r.r(t),r.d(t,{CRUDRenderer:()=>x,CRUDRendererBase:()=>D,default:()=>O});var n=r(9787),i=r(65758),o=r(31223),a=r.n(o),l=r(12557),s=r.n(l),c=r(24465),d=r.n(c),u=r(86974),p=r.n(u),h=r(47755),v=r(68333),f=r(19334),m=r.n(f),g=r(97326),b=r(59245),y=r.n(b),C=r(33170),S=r.n(C),F=r(6663),P=r(69143),T=r.n(P),I=r(34736),A=r.n(I),k=["selectedChange","columnSort","columnFilter","columnSearch","columnToggled","orderChange","rowClick","rowDbClick","rowMouseEnter","rowMouseLeave","selected"],O=function(e){function t(t){var r,n=e.call(this,t)||this;n.filterOnEvent=A()(function(e){return d()(e,function(e,t){return!k.includes(t)})}),n.controlRef=n.controlRef.bind(n),n.handleFilterReset=n.handleFilterReset.bind(n),n.handleFilterSubmit=n.handleFilterSubmit.bind(n),n.handleFilterInit=n.handleFilterInit.bind(n),n.handleAction=n.handleAction.bind(n),n.handleBulkAction=n.handleBulkAction.bind(n),n.handleChangePage=n.handleChangePage.bind(n),n.handleBulkGo=n.handleBulkGo.bind(n),n.handleDialogConfirm=n.handleDialogConfirm.bind(n),n.handleDialogClose=n.handleDialogClose.bind(n),n.handleItemChange=n.handleItemChange.bind(n),n.handleSave=n.handleSave.bind(n),n.handleSaveOrder=n.handleSaveOrder.bind(n),n.handleSelect=n.handleSelect.bind(n),n.handleChildPopOverOpen=n.handleChildPopOverOpen.bind(n),n.handleChildPopOverClose=n.handleChildPopOverClose.bind(n),n.search=n.search.bind(n),n.silentSearch=n.silentSearch.bind(n),n.handleQuery=n.handleQuery.bind(n),n.renderHeaderToolbar=n.renderHeaderToolbar.bind(n),n.renderFooterToolbar=n.renderFooterToolbar.bind(n),n.clearSelection=n.clearSelection.bind(n),n.filterItemIndex=n.filterItemIndex.bind(n);var i=t.location,o=t.store,a=t.pageField,l=t.perPageField,s=t.syncLocation;t.loadDataOnce;var c=n.getParseQueryOptions(t);return n.mounted=!0,s&&i&&(i.query||i.search)?o.updateQuery((0,h.mB4)(i,c),void 0,a,l):s&&!i&&window.location.search&&o.updateQuery((0,h.mB4)(window.location,c),void 0,a,l),n.props.store.setFilterTogglable(!!n.props.filterTogglable,n.props.filterDefaultVisible),n.props.api&&n.props.store.updateData({items:[]}),n.props.pickerMode&&(r=(0,h.v8S)(n.props))&&n.syncSelectedFromPicker(r),n}return(0,n.ZT)(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.store,r=e.autoGenerateFilter,n=e.perPageField;e.columns,this.props.perPage&&!t.query[n||"perPage"]&&t.changePage(t.page,this.props.perPage),(this.props.filter||r)&&(!t.filterTogggable||t.filterVisible)||this.handleFilterInit({}),this.parentContainer=this.getClosestParentContainer()},t.prototype.componentDidUpdate=function(e){var t,r,n=this.props,i=e.store;(0,h.aGv)(["toolbar","headerToolbar","footerToolbar","bulkActions"],e,n)&&(this.renderHeaderToolbar=this.renderHeaderToolbar.bind(this),this.renderFooterToolbar=this.renderFooterToolbar.bind(this)),!this.props.pickerMode||a()(r=(0,h.v8S)(this.props),(0,h.v8S)(e))||a()(r,i.selectedItems.concat())||this.syncSelectedFromPicker(r),!!this.props.filterTogglable!=!!e.filterTogglable&&i.setFilterTogglable(!!n.filterTogglable,n.filterDefaultVisible);var o=!1;if(e.syncLocation&&e.location&&e.location.search!==n.location.search&&(i.updateQuery((0,h.mB4)(n.location,this.getParseQueryOptions(n)),void 0,n.pageField,n.perPageField),o=!!(n.api&&(0,h.RjM)(i.query,this.lastQuery,!1))),o);else if(e.api&&n.api&&(0,h.rMT)(e.api,n.api,i.fetchCtxOf(e.data,{pageField:e.pageField,perPageField:e.perPageField}),i.fetchCtxOf(n.data,{pageField:n.pageField,perPageField:n.perPageField})))o=!0;else if(!n.api&&(0,h.SSQ)(n.source)&&n.data!==e.data){var l=(0,h.OgC)(n.source,n.data,"| raw");this.lastData&&this.lastData===l||(i.initFromScope(n.data,n.source,{columns:null!=(t=i.columns)?t:n.columns}),this.props.pickerMode&&(r=(0,h.v8S)(this.props))&&this.syncSelectedFromPicker(r),this.lastData=l)}o&&this.search()},t.prototype.componentWillUnmount=function(){var e,t;this.mounted=!1,clearTimeout(this.timer),null==(t=(e=this.filterOnEvent.cache).clear)||t.call(e)},t.prototype.getParseQueryOptions=function(e){var t,r=e.parsePrimitiveQuery;return{parsePrimitive:!!((0,h.Kn2)(r)?null==r?void 0:r.enable:r),primitiveTypes:null!=(t=null==r?void 0:r.types)?t:["boolean"]}},t.prototype.getClosestParentContainer=function(){var e=(0,g.findDOMNode)(this);return null==e?void 0:e.closest("[role=dialog]")},t.prototype.controlRef=function(e){for(;e&&e.getWrappedInstance;)e=e.getWrappedInstance();this.control=e},t.prototype.handleAction=function(e,t,r,i,o){var a=this;void 0===i&&(i=!1);var l=this.props,s=l.onAction,c=l.store,d=l.messages,u=l.pickerMode,p=l.env,v=(l.pageField,l.stopAutoRefreshWhenModalIsOpen);if(!c.loading)if("dialog"===t.actionType){c.setCurrentAction(t,this.props.resolveDefinitions);var f=r.index,m=c.items.length;return v&&clearTimeout(this.timer),new Promise(function(e){c.openDialog(r,{hasNext:f<m-1,nextIndex:f+1,hasPrev:f>0,prevIndex:f-1,index:f},function(r,n){var i;null==(i=t.callback)||i.call(t,r,n),e({confirmed:r,value:n})},o||a.context)})}else if("ajax"===t.actionType){c.setCurrentAction(t,this.props.resolveDefinitions);var g=t.redirect&&(0,h.hXT)(t.redirect,r);if(g&&t.blank&&p.jumpTo(g,t,r),!(0,h.X1t)(t.api,r))return;return c.saveRemote(t.api,r,{successMessage:t.messages&&t.messages.success||d&&d.saveSuccess,errorMessage:t.messages&&t.messages.failed||d&&d.saveFailed}).then(function(e){return(0,n.mG)(a,void 0,void 0,function(){var i,o;return(0,n.Jh)(this,function(n){switch(n.label){case 0:if(i=(0,h.nW9)(r,e),!(t.feedback&&(0,h.pn4)(t.feedback,i)))return[3,2];return[4,this.openFeedback(t.feedback,i)];case 1:n.sent(),v&&clearTimeout(this.timer),n.label=2;case 2:return(o=t.redirect&&(0,h.hXT)(t.redirect,i))&&!t.blank&&p.jumpTo(o,t,i),t.reload?this.reloadTarget((0,h.u22)(t.reload,i),i):o||this.search(void 0,void 0,!0,!0),t.close&&this.closeTarget(t.close),[2]}})})}).catch(function(e){if(i||t.countDown)throw e})}else if("reload"!==t.actionType||t.target)if(u&&("confirm"===t.actionType||"submit"===t.actionType))return c.setCurrentAction(t,this.props.resolveDefinitions),Promise.resolve({items:c.selectedItems.concat()});else if(t.onClick){c.setCurrentAction(t,this.props.resolveDefinitions);var b=t.onClick;"string"==typeof b&&(b=(0,h.PqP)(b,"event","props","data")),b&&b(e,this.props,r)}else s(e,t,r,i,o||this.context);else this.reload()},t.prototype.handleBulkAction=function(e,t,r,i){var o,a=this,l=this.props,s=l.store,c=l.primaryField,d=l.onAction,u=l.messages,p=l.pageField,v=l.stopAutoRefreshWhenModalIsOpen,f=l.env;if(e.length||!1===i.requireSelected){var m=e.map(function(e){return e.hasOwnProperty(c)?e[c]:null}).filter(function(e){return e}).join(","),g=(0,h._bA)([s.mergedData,{event:r},(0,n.pi)((0,n.pi)((0,n.pi)({},e[0]),s.eventContext),{currentPageData:((null==(o=s.mergedData)?void 0:o.items)||[]).concat(),rows:e,items:e,ids:m})]),b=function(){if("dialog"===i.actionType)return a.handleAction(r,(0,n.pi)((0,n.pi)({},i),{__from:"bulkAction"}),g);"ajax"===i.actionType?(0,h.X1t)(i.api,g)&&s.saveRemote(i.api,g,{successMessage:i.messages&&i.messages.success||u&&u.saveSuccess,errorMessage:i.messages&&i.messages.failed||u&&u.saveFailed}).then(function(e){return(0,n.mG)(a,void 0,void 0,function(){var t,r,o;return(0,n.Jh)(this,function(n){switch(n.label){case 0:if(t=(0,h.nW9)(g,e),!(i.feedback&&(0,h.pn4)(i.feedback,t)))return[3,2];return[4,this.openFeedback(i.feedback,t)];case 1:n.sent(),v&&clearTimeout(this.timer),n.label=2;case 2:return i.reload?this.reloadTarget((0,h.u22)(i.reload,t),t):this.search(((o={})[p||"page"]=1,o),void 0,!0,!0),i.close&&this.closeTarget(i.close),(r=i.redirect&&(0,h.hXT)(i.redirect,t))&&f.jumpTo(r,i,t),[2]}})})}).catch(function(){return null}):d&&d(r,i,g,!1,a.context)},y="";!i.ignoreConfirm&&i.confirmText&&f.confirm&&(y=(0,h.hXT)(i.confirmText,g))?f.confirm(y,(0,h.hXT)(i.confirmTitle,g)||void 0).then(function(e){return e&&b()}):b()}},t.prototype.handleItemAction=function(e,t){this.doAction(e,t)},t.prototype.handleFilterInit=function(e){var t,r=this.props,i=r.defaultParams,o=r.columns,a=r.matchFunc,l=r.store,s=r.orderBy,c=r.orderDir;r.dispatchEvent;var d=(0,n.pi)({},i);s&&(d.orderBy=s,d.orderDir=c||"asc"),this.handleFilterSubmit((0,n.pi)((0,n.pi)((0,n.pi)({},d),e),l.query),!1,!0,!1!==this.props.initFetch,!0),l.setPristineQuery();var u=this.props,p=u.pickerMode,v=u.options;if(p){l.initFromScope({items:v||[]},"${items}",{columns:null!=(t=l.columns)?t:o,matchFunc:a});var f=void 0;(f=(0,h.v8S)(this.props))&&this.syncSelectedFromPicker(f)}},t.prototype.handleFilterReset=function(e,t){var r=this.props,i=r.store,o=r.syncLocation,a=r.env,l=r.pageField,s=r.perPageField,c={};Object.keys(e).forEach(function(e){return c[e]=""}),i.updateQuery((0,n.pi)((0,n.pi)({},c),i.pristineQuery),o&&a&&a.updateLocation?function(e){return a.updateLocation(e)}:void 0,l,s,!0),this.lastQuery=i.query,(null==t?void 0:t.actionType)&&["reset-and-submit","clear-and-submit","submit"].includes(t.actionType)||this.search()},t.prototype.handleFilterSubmit=function(e,t,r,i,o){void 0===t&&(t=!0),void 0===r&&(r=!1),void 0===i&&(i=!0),void 0===o&&(o=!1);var a,l,c,d=this.props,u=d.store,p=d.syncLocation,v=d.env,f=d.pageField,m=d.perPageField,g=d.loadDataOnceFetchOnFilter,b=d.parsePrimitiveQuery,y=this.getParseQueryOptions(this.props);e=(0,n.pi)((0,n.pi)({},e),s()(null!=(c=null==(l=null==e?void 0:e.__super)?void 0:l.diff)?c:{},function(e){return void 0===e})),e=p?(0,h.J1H)((0,h.mUA)(e,void 0,!0)):e,b&&(e=(0,h.pa5)(e,y)),u.updateQuery((0,n.pi)((0,n.pi)({},e),((a={})[f||"page"]=t?1:u.page,a)),p&&v&&v.updateLocation?function(e){return v.updateLocation(e,r)}:void 0,f,m),this.lastQuery=u.query,i&&this.search(void 0,void 0,void 0,!1!==g,o)},t.prototype.handleBulkGo=function(e,t,r){var n=this,i=this.props.store.selectedAction,o=this.props.env,a="";return i.confirmText&&(a=(0,h.hXT)(i.confirmText,this.props.store.mergedData))?o.confirm(a).then(function(o){return o&&n.handleBulkAction(e,t,r,i)}):this.handleBulkAction(e,t,r,i)},t.prototype.handleDialogConfirm=function(e,t,r,i){var o,a,l,s,c=this.props,d=c.store,u=c.pageField,p=c.stopAutoRefreshWhenModalIsOpen,v=c.interval,f=c.silentPolling,m=c.env;d.closeDialog(!0,e);var g=d.action;if(p&&v&&(this.timer=setTimeout(f?this.silentSearch:this.search,Math.max(v,1e3))),"next"===t.actionType&&"number"==typeof r.nextIndex&&d.data.items[r.nextIndex])return this.handleAction(void 0,(0,n.pi)({},g),(0,h.nW9)((0,h.nW9)(d.data,{index:r.nextIndex}),d.data.items[r.nextIndex]));if("prev"===t.actionType&&"number"==typeof r.prevIndex&&d.data.items[r.prevIndex])return this.handleAction(void 0,(0,n.pi)({},g),(0,h.nW9)((0,h.nW9)(d.data,{index:r.prevIndex}),d.data.items[r.prevIndex]));if(e.length){var b=e[0];r=(0,h.nW9)(r,b);var y=i[0];y&&"form"===y.props.type&&(b&&b.__saved?(null!=(a=t.reload)?a:g.reload)||this.search(g.__from?((o={})[u||"page"]=1,o):void 0,void 0,!0,!0):b&&(b.hasOwnProperty("items")&&b.items||b.hasOwnProperty("ids"))&&this.control.bulkUpdate&&this.control.bulkUpdate(b,b.items))}var C=null!=(l=t.reload)?l:g.reload;C&&this.reloadTarget((0,h.u22)(C,r),r);var S=null!=(s=t.redirect)?s:g.redirect;(S=S&&(0,h.hXT)(S,r))&&m.jumpTo(S,g,r)},t.prototype.handleDialogClose=function(e){void 0===e&&(e=!1);var t=this.props,r=t.store,n=t.stopAutoRefreshWhenModalIsOpen,i=t.silentPolling,o=t.interval;r.closeDialog(e),n&&o&&(this.timer=setTimeout(i?this.silentSearch:this.search,Math.max(o,1e3)))},t.prototype.openFeedback=function(e,t){var r=this;return new Promise(function(n){var i=r.props.store;i.setCurrentAction({type:"button",actionType:"dialog",dialog:e},r.props.resolveDefinitions),i.openDialog(t,void 0,function(e){n(e)},r.context)})},t.prototype.search=function(e,t,r,i,o){var a,l,s,c;return void 0===i&&(i=!1),void 0===o&&(o=!1),(0,n.mG)(this,void 0,void 0,function(){var d,u,p,v,f,m,g,b,y,C,S,P,T,I,A,k,O,D,x,w,M,R,B,E,Q,N,L,W,_,q;return(0,n.Jh)(this,function(U){switch(U.label){case 0:if(u=(d=this.props).store,p=d.api,v=d.messages,f=d.pageField,m=d.perPageField,g=d.interval,b=d.stopAutoRefreshWhen,y=d.stopAutoRefreshWhenModalIsOpen,C=d.silentPolling,S=d.syncLocation,P=d.syncResponse2Query,T=d.pickerMode,I=d.env,A=d.loadDataOnce,k=d.loadDataOnceFetchOnFilter,O=d.source,D=d.columns,x=d.dispatchEvent,r&&!T&&u.resetSelection(),w="",e&&"string"==typeof e.loadDataMode&&(w="load-more",delete e.loadDataMode),clearTimeout(this.timer),e&&u.updateQuery(e,!w&&S&&I&&I.updateLocation?I.updateLocation:void 0,f,m),this.lastQuery=u.query,M=(0,h.nW9)(u.data,u.query),R=(null==(a=this.props)?void 0:a.matchFunc)&&"string"==typeof this.props.matchFunc?(0,h.PqP)(this.props.matchFunc,"items","itemsRaw","options"):void 0,!(0,h.X1t)(p,M))return[3,8];return[4,u.fetchInitData(p,M,{successMessage:v&&v.fetchSuccess,errorMessage:v&&v.fetchFailed,autoAppend:!0,forceReload:i,loadDataOnce:A,source:O,silent:t,pageField:f,perPageField:m,loadDataMode:w,syncResponse2Query:P,columns:null!=(l=u.columns)?l:D,matchFunc:R,filterOnAllColumns:!1===k})];case 1:if(B=U.sent(),!(0,F.fh)(u))return[2,B];if(E=u.page,Q=u.lastPage,N=u.msg,L=u.error,!o)return[3,3];return[4,null==x?void 0:x("fetchInited",(0,h.nW9)(this.props.data,{responseData:(null==B?void 0:B.ok)?null!=(s=u.data)?s:{}:B,responseStatus:(null==B?void 0:B.status)===void 0?+!!L:null==B?void 0:B.status,responseMsg:N}))];case 2:if(null==(W=U.sent())?void 0:W.prevented)return[2,u.data];return[3,5];case 3:return[4,null==x?void 0:x("research",(0,h.nW9)(this.props.data,{responseData:(null==B?void 0:B.ok)?null!=M?M:{}:B,responseStatus:(null==B?void 0:B.status)===void 0?+!!L:null==B?void 0:B.status,responseMsg:N}))];case 4:if(null==(W=U.sent())?void 0:W.prevented)return[2];U.label=5;case 5:if(!(!A&&!u.data.items.length&&!g&&E>1&&Q<E))return[3,7];return[4,this.search((0,n.pi)((0,n.pi)({},u.query),((q={})[f||"page"]=Q,q)),!1,void 0)];case 6:U.sent(),U.label=7;case 7:return(null==B?void 0:B.ok)&&g&&this.mounted&&(!b||!(y&&u.hasModalOpened||(0,h.fz_)(b,(0,h.nW9)(u.data,u.query))))&&(this.timer=setTimeout(C?this.silentSearch.bind(this,void 0,void 0,!0):this.search.bind(this,void 0,void 0,void 0,!0),Math.max(g,1e3))),[3,9];case 8:O&&u.initFromScope(M,O,{columns:null!=(c=u.columns)?c:D,matchFunc:R}),U.label=9;case 9:return this.props.pickerMode&&(_=(0,h.v8S)(this.props))&&this.syncSelectedFromPicker(_),[2,u.data]}})})},t.prototype.silentSearch=function(e,t,r){return void 0===r&&(r=!1),this.search(e,!0,t,r)},t.prototype.handleChangePage=function(e,t,r){var i;return(0,n.mG)(this,void 0,void 0,function(){var o,a,l,s,c,d,u,p,h,f,m,b,y,C;return(0,n.Jh)(this,function(n){switch(n.label){case 0:if(a=(o=this.props).store,l=o.syncLocation,s=o.env,c=o.pageField,d=o.perPageField,u=o.pageDirectionField,p=o.autoJumpToTopOnPagerChange,h=o.translate,f=o.api,m=o.loadDataOnce,!(f&&!m&&(null==(i=this.control)?void 0:i.hasModifiedItems())))return[3,2];return[4,(0,v.M6)(h("CRUD.confirmLeaveUnSavedPage"))];case 1:if(!n.sent())return[2];n.label=2;case 2:return(C={})[c||"page"]=e,b=C,r&&(b[u||"pageDir"]=r),t&&(b[d||"perPage"]=t),a.updateQuery(b,l&&(null==s?void 0:s.updateLocation)?s.updateLocation:void 0,c,d),this.search(void 0,void 0,void 0),p&&this.control&&(this.control.scrollToTop?this.control.scrollToTop():((0,g.findDOMNode)(this.control).scrollIntoView(),(y=window.scrollY)&&window.scroll(0,y))),[2]}})})},t.prototype.syncSelectedFromPicker=function(e){var t=this.props,r=t.store,n=t.primaryField,i=t.strictMode,o=function(e,t){var r=e[n||"id"],o=t[n||"id"];return!!(e===t||r&&(i?r===o:r==o))},a=e.map(function(e){var t;return T()(e)||((t={})[n||"id"]=e,e=t),(0,h.hEs)(r.items,function(t){return o(t,e)})||e});this.props.store.setSelectedItems(a)},t.prototype.handleItemChange=function(e,t,r){var n=this.props.store,i="".concat(r).split(".").map(function(e){return parseInt(e,10)}),o=(0,h.o5f)(n.items,i,1,e);n.replaceItems(o)},t.prototype.handleSave=function(e,t,r,i,o,a){var l=this,s=this.props,c=s.store,d=s.quickSaveApi,u=s.quickSaveItemApi,p=s.primaryField,v=s.env,f=s.messages,m=s.reload,g=s.dispatchEvent;if(Array.isArray(e)){if(!(0,h.X1t)(d)){v&&v.alert("CRUD quickSaveApi is required");return}var b=(0,h.nW9)(c.data,{rows:e,rowsDiff:t,indexes:r,rowsOrigin:o});return e.length&&e[0].hasOwnProperty(p||"id")&&(b.ids=e.map(function(e){return e[p||"id"]}).join(",")),i&&(b.unModifiedItems=i),c.saveRemote(d,b,{successMessage:f&&f.saveFailed,errorMessage:f&&f.saveSuccess}).then(function(e){return(0,n.mG)(l,void 0,void 0,function(){var t,r,i;return(0,n.Jh)(this,function(n){switch(n.label){case 0:if(!e)return[2];return[4,null==g?void 0:g("quickSaveSucc",(0,h.ktx)(b,{result:e}))];case 1:if(null==(t=n.sent())?void 0:t.prevented)return[2];return[2,(r=null!=(i=null==a?void 0:a.reload)?i:m)?this.reloadTarget((0,h.u22)(r,b),b):this.search(void 0,void 0,!0,!0)]}})})}).catch(function(e){return(0,n.mG)(l,void 0,void 0,function(){return(0,n.Jh)(this,function(t){switch(t.label){case 0:return[4,null==g?void 0:g("quickSaveFail",(0,h.nW9)(this.props.data,{error:e}))];case 1:return t.sent(),[2]}})})})}if(!(0,h.X1t)(u)){v&&v.alert("CRUD quickSaveItemApi is required!");return}var y=(0,h.nW9)(c.data,{item:e,modified:t,origin:o}),C=(0,h.nW9)(y,e);return c.saveRemote(u,C).then(function(e){return(0,n.mG)(l,void 0,void 0,function(){var t,r,i;return(0,n.Jh)(this,function(n){switch(n.label){case 0:if(!e)return[2];return[4,null==g?void 0:g("quickSaveItemSucc",(0,h.ktx)(y,{result:e}))];case 1:if(null==(t=n.sent())?void 0:t.prevented)return[2];return[2,(r=null!=(i=null==a?void 0:a.reload)?i:m)?this.reloadTarget((0,h.u22)(r,y),y):this.search(void 0,void 0,!0,!0)]}})})}).catch(function(e){return(0,n.mG)(l,void 0,void 0,function(){return(0,n.Jh)(this,function(t){switch(t.label){case 0:return(null==a?void 0:a.resetOnFailed)&&this.control.reset(),[4,null==g?void 0:g("quickSaveItemFail",(0,h.nW9)(this.props.data,{error:e}))];case 1:return t.sent(),[2]}})})})},t.prototype.handleSaveOrder=function(e,t){var r,i,o=this,a=this.props,l=a.store,s=a.saveOrderApi,c=a.orderField,d=a.primaryField,u=a.env,p=a.reload,v=a.dispatchEvent;if(!s){u&&u.alert("CRUD saveOrderApi is required!");return}var f=(0,h.nW9)(l.data),g=[],b=d&&t[0]&&t[0].hasOwnProperty(d);if(b||(f.idMap={}),f.insertAfter={},t.forEach(function(n){if(~e.indexOf(n))if(r){var o=b?r[d]:t.indexOf(r);f.insertAfter[o]=f.insertAfter[o]||[],b||(f.idMap[o]=r),f.insertAfter[o].push(b?n[d]:n)}else g.push(n);else r=n,i=i||n}),i&&g.length){var y=b?i[d]:t.indexOf(i);b||(f.idMap[y]=i),f.insertBefore={},f.insertBefore[y]=g.map(function(e){return b?e[d]:e})}else if(g.length){var C=g[0],S=b?C[d]:t.indexOf(C);b||(f.idMap[S]=C),f.insertAfter[S]=g.slice(1).map(function(e){return b?e[d]:e})}if(c){var F=(l.page-1)*l.perPage||0;t=(0,h.GyU)(t,function(e,t,r){var n;return(0,h.ktx)(e,((n={})[c]=(1===r?F:0)+t+1,n))})}if(f.rows=t.concat(),b){var P=function(e){return e.map(function(e){return"".concat(e[d]).concat(Array.isArray(e.children)&&e.children.length?"[".concat(P(e.children),"]"):"")}).join(",")};f.ids=P(t),c&&(f.order=(0,h.GyU)(t,function(e){return m()(e,[d,c,"children"])}))}return(0,h.X1t)(s,f)&&l.saveRemote(s,f).then(function(e){return(0,n.mG)(o,void 0,void 0,function(){var t;return(0,n.Jh)(this,function(r){switch(r.label){case 0:if(!e)return[2];return[4,null==v?void 0:v("saveOrderSucc",(0,h.ktx)(f,{result:e}))];case 1:if(null==(t=r.sent())?void 0:t.prevented)return[2];return p&&this.reloadTarget((0,h.u22)(p,f),f),this.search(void 0,void 0,!0,!0),[2]}})})}).catch(function(e){return(0,n.mG)(o,void 0,void 0,function(){return(0,n.Jh)(this,function(t){switch(t.label){case 0:return[4,null==v?void 0:v("saveOrderFail",(0,h.nW9)(this.props.data,{error:e}))];case 1:return t.sent(),[2]}})})})},t.prototype.handleSelect=function(e,t){var r=this.props,n=r.store,i=r.keepItemSelectionOnPageChange,o=r.primaryField,a=r.multiple,l=r.pickerMode,s=r.strictMode,c=r.onSelect,d=e;if(i&&n.selectedItems.length){var u=n.items.length>e.length+t.length?function(e,t){return(e.__pristine||e)===(t.__pristine||t)}:function(e,t){var r=e[o||"id"],n=t[o||"id"];return e===t||r&&(s?r===n:r==n)},p=e.concat();d=n.selectedItems.map(function(e){var r=p.findIndex(function(t){return u(t,e)});return~r?p.splice(r,1)[0]:(0,h.hEs)(t,function(t){return u(t,e)})?null:e}).filter(function(e){return e}).concat(p)}var v=n.items.filter(function(e){return!d.find(function(t){return(t.__pristine||t)===e})}).map(function(e){return t.find(function(t){return t.__pristine===e})||e});l&&!1===a&&d.length>1&&v.push.apply(v,d.splice(0,d.length-1)),n.setSelectedItems(d),n.setUnSelectedItems(v),c&&c(d,v)},t.prototype.handleChildPopOverOpen=function(e){this.props.interval&&e&&~["dialog","drawer"].indexOf(e.mode)&&(this.props.stopAutoRefreshWhenModalIsOpen&&clearTimeout(this.timer),this.props.store.setInnerModalOpened(!0))},t.prototype.handleChildPopOverClose=function(e){var t=this.props,r=t.stopAutoRefreshWhenModalIsOpen,n=t.silentPolling,i=t.interval;e&&~["dialog","drawer"].indexOf(e.mode)&&(this.props.store.setInnerModalOpened(!1),r&&i&&(this.timer=setTimeout(n?this.silentSearch:this.search,Math.max(i,1e3))))},t.prototype.handleQuery=function(e,t,r,i,o){var a,l=this.props,s=l.store,c=l.syncLocation,d=l.env,u=l.pageField,p=l.perPageField,h=l.loadDataOnceFetchOnFilter;return s.updateQuery(i?(0,n.pi)(((a={})[u||"page"]=1,a),e):e,c&&d&&d.updateLocation?d.updateLocation:void 0,u,p,r),this.search(void 0,void 0,null!=o?o:r,null!=t?t:!0===h)},t.prototype.reload=function(e,t,r,n,i,o){return t?this.receive(t,void 0,i,null==o?void 0:o.resetPage,!0):this.search(void 0,void 0,!0,!0)},t.prototype.receive=function(e,t,r,n,i){return this.handleQuery(e,!0,r,n,i)},t.prototype.reloadTarget=function(e,t){},t.prototype.closeTarget=function(e){},t.prototype.doAction=function(e,t,r,i){var o;return void 0===r&&(r=!1),(0,n.mG)(this,void 0,void 0,function(){var a,l,s;return(0,n.Jh)(this,function(n){switch(n.label){case 0:if(a=this.props.store,!(e.actionType&&["submitQuickEdit","toggleExpanded","setExpanded","initDrag","cancelDrag","selectAll","clearAll"].includes(e.actionType)))return[3,1];return[2,null==(o=this.control)?void 0:o.doAction(e,t,r,i)];case 1:if("select"!==e.actionType)return[3,3];return[4,(0,h.tW8)(a.items,t,null==i?void 0:i.index,null==i?void 0:i.condition)];case 2:return l=n.sent(),s=a.items.filter(function(e){return!l.includes(e)}),[2,this.handleSelect(l,s)];case 3:return[2,this.handleAction(void 0,e,t,r)]}})})},t.prototype.unSelectItem=function(e,t){var r=this.props.store,n=r.selectedItems.concat(),i=r.unSelectedItems.concat(),o=n.indexOf(e);~o&&i.push.apply(i,n.splice(o,1)),r.setSelectedItems(n),r.setUnSelectedItems(i)},t.prototype.clearSelection=function(){var e=this.props,t=e.store,r=e.itemCheckableOn,i=(0,n.CR)(p()(t.selectedItems,function(e){return!r||(0,h.fz_)(r,e)}),2),o=i[0],a=i[1],l=t.unSelectedItems.concat(o);t.setSelectedItems(a),t.setUnSelectedItems(l)},t.prototype.hasBulkActionsToolbar=function(){var e=this.props,t=e.headerToolbar,r=e.footerToolbar,n=function(e){return~["bulkActions","bulk-actions"].indexOf(e.type||e)};return Array.isArray(t)&&S()(t,n)||Array.isArray(r)&&S()(r,n)},t.prototype.hasBulkActions=function(){var e=this.props,t=e.bulkActions,r=(e.itemActions,e.store);if(!t||!t.length)return!1;var i=[],o=r.mergedData;return t&&t.length&&(i=t.map(function(e){return(0,n.pi)((0,n.pi)({},e),(0,h.Lti)(e,o))}).filter(function(e){return!e.hidden&&!1!==e.visible})),i.length},t.prototype.renderBulkActions=function(e){var t,r=this,o=this.props,a=o.bulkActions,l=o.itemActions,s=o.store,c=o.render,d=o.classnames,u=o.primaryField;if(!a||!a.length)return null;var p=s.selectedItems,v=s.unSelectedItems,f=[],m=[],g=(0,h.nW9)(s.mergedData,(0,n.pi)((0,n.pi)({currentPageData:((null==(t=s.mergedData)?void 0:t.items)||[]).concat()},s.eventContext),{rows:p.concat(),items:p.concat(),ids:p.map(function(e){return e.hasOwnProperty(u)?e[u]:null}).filter(function(e){return e}).join(",")}));a&&a.length&&(!l||!l.length||p.length>1)&&(f=a.map(function(e){return(0,n.pi)((0,n.pi)({},e),(0,h.Lti)(e,g))}).filter(function(e){return!e.hidden&&!1!==e.visible}));var b=(0,h.nW9)(s.data,p.length?p[0]:{});return l&&p.length<=1&&(m=l.map(function(e){return(0,n.pi)((0,n.pi)({},e),(0,h.Lti)(e,b))}).filter(function(e){return!e.hidden&&!1!==e.visible})),f.length||m.length?i.createElement("div",{className:d("Crud-actions")},f.map(function(e,t){return c("bulk-action/".concat(t),(0,n.pi)((0,n.pi)({},y()(e,["visibleOn","hiddenOn","disabledOn"])),{type:e.type||"button",ignoreConfirm:!0}),{key:"bulk-".concat(t),data:g,disabled:e.disabled||!1!==e.requireSelected&&!p.length,onAction:r.handleBulkAction.bind(r,p.concat(),v.concat())})}),m.map(function(e,t){return c("bulk-action/".concat(t),(0,n.pi)((0,n.pi)({},y()(e,["visibleOn","hiddenOn","disabledOn"])),{type:"button"}),{key:"item-".concat(t),data:b,disabled:e.disabled||1!==p.length,onAction:r.handleItemAction.bind(r,e,b)})})):null},t.prototype.renderPagination=function(e){var t=this.props,r=t.store,o=t.render,a=t.classnames,l=t.alwaysShowPagination,s=t.perPageAvailable,c=t.testIdBuilder,d=r.page,u=r.lastPage;if("simple"!==r.mode&&r.lastPage<2&&!l)return null;var p={};if(Array.isArray(s)&&(p.perPageAvailable=s),"string"!=typeof e){Object.assign(p,e);var v=e.showPageInput;p.showPageInput=!0===v||u>9&&null==v,p.total=(0,h.OgC)(e.total,r.data)}else p.showPageInput=u>9;return i.createElement("div",{className:a("Crud-pager")},o("pagination",{type:"pagination",testIdBuilder:null==c?void 0:c.getChild("pagination")},(0,n.pi)((0,n.pi)({},p),{activePage:d,lastPage:u,hasNext:r.hasNext,mode:r.mode,perPage:r.perPage,popOverContainer:this.parentContainer,onPageChange:this.handleChangePage})))},t.prototype.renderStatistics=function(){var e=this.props,t=e.store,r=e.classnames,n=e.translate,o=e.alwaysShowPagination;return t.lastPage<=1&&!o?null:i.createElement("div",{className:r("Crud-statistics")},n("CRUD.stat",{page:t.page,lastPage:t.lastPage,total:t.total}))},t.prototype.renderSwitchPerPage=function(e){var t=this,r=this.props,n=r.mobileUI,o=r.store,a=r.perPageAvailable,l=r.classnames,s=r.classPrefix,c=r.translate,d=r.testIdBuilder;if(!e.items.length)return null;var u=n?(a||[5,10,20,50,100]).map(function(e){return{label:e+" 条/页",value:e+""}}):(a||[5,10,20,50,100]).map(function(e){return{label:e,value:e+""}});return i.createElement("div",{className:l("Crud-pageSwitch")},n?null:i.createElement("span",null,c("CRUD.perPage")),i.createElement(v.Ph,{classPrefix:s,searchable:!1,placeholder:c("Select.placeholder"),options:u,value:o.perPage+"",onChange:function(e){return t.handleChangePage(1,e.value)},clearable:!1,popOverContainer:this.parentContainer,testIdBuilder:null==d?void 0:d.getChild("perPage")}))},t.prototype.renderLoadMore=function(){var e=this,t=this.props,r=t.store,o=t.classPrefix,a=t.classnames,l=t.translate,s=t.testIdBuilder,c=r.page,d=r.lastPage;return i.createElement("div",{className:a("Crud-loadMore")},i.createElement(v.zx,(0,n.pi)({disabled:c>=d,disabledTip:l("CRUD.loadMoreDisableTip"),classPrefix:o,onClick:function(){return e.search({page:c+1,loadDataMode:"load-more"})},size:"sm"},null==s?void 0:s.getChild("loadMore").getTestId()),l("CRUD.loadMore")))},t.prototype.renderFilterToggler=function(){var e,t,r,o=this.props,a=o.store,l=o.classnames,s=o.translate,c=o.filterTogglable;if(!a.filterTogggable)return null;var d=T()(c)?(0,n.pi)({},c):{};return a.filterVisible&&(d.icon=null!=(e=d.activeIcon)?e:d.icon,d.label=null!=(t=d.activeLabel)?t:d.label),i.createElement("button",{onClick:function(){return a.setFilterVisible(!a.filterVisible)},className:l("Button Button--size-default Button--default",{"is-active":a.filterVisible})},d.icon?i.createElement(v.JO,{icon:d.icon,className:"icon m-r-xs"}):(null==d?void 0:d.icon)!==!1?i.createElement(v.JO,{icon:"filter",className:"icon m-r-xs"}):null,null!=(r=null==d?void 0:d.label)?r:s("CRUD.filter"))},t.prototype.renderExportCSV=function(e){var t=this.props,r=t.store,n=t.classPrefix,o=t.translate,a=t.loadDataOnce,l=e.api,s=e.filename;return i.createElement(v.zx,{classPrefix:n,onClick:function(){return r.exportAsCSV({loadDataOnce:a,api:l,filename:s,data:r.filterData})}},e.label||o("CRUD.exportCSV"))},t.prototype.renderToolbar=function(e,t,r,o){var a=this;if(void 0===t&&(t=0),void 0===r&&(r={}),!e)return null;var l=this.props,s=l.render,c=l.store,d=l.mobileUI,u=l.translate,p=l.testIdBuilder,v=e.type||e;if("bulkActions"===v||"bulk-actions"===v)return this.renderBulkActions(r);if("pagination"===v)return this.renderPagination(e);if("statistics"===v)return this.renderStatistics();if("switch-per-page"===v)return this.renderSwitchPerPage(r);if("load-more"===v)return this.renderLoadMore();else if("filter-toggler"===v)return this.renderFilterToggler();else if("export-csv"===v)return this.renderExportCSV(e);else if("reload"===v){var f={label:"",icon:"fa fa-sync",tooltip:u("reload"),tooltipPlacement:"top",type:"button"};return"object"==typeof e&&(f=(0,n.pi)((0,n.pi)({},f),y()(e,["type","align"]))),s("toolbar/".concat(t),f,{onAction:function(){a.reload()}})}else if(Array.isArray(e)){var m=e.filter(function(e){return(0,h.pn4)(e,c.toolbarData)}).map(function(e,t){return{dom:a.renderToolbar(e,t,r,o),toolbar:e}}).filter(function(e){return e.dom}),g=m.length,b=this.props.classnames;return g?i.createElement("div",(0,n.pi)({className:b("Crud-toolbar"),key:t},null==p?void 0:p.getChild("toolbar").getTestId()),m.map(function(e,t){var r=e.toolbar,n=e.dom,o=r.type||r,a=r.align||("pagination"===o?"right":"left");return i.createElement("div",{key:r.id||t,className:b("Crud-toolbar-item",a?"Crud-toolbar-item--".concat(a):"",{"is-mobile":d})},n)})):null}var C=o?o(e,t):void 0;if(void 0!==C)return C;var S=r.$$editable;return s("toolbar/".concat(t),e,{data:c.toolbarData,page:c.page,lastPage:c.lastPage,perPage:c.perPage,total:c.total,onQuery:this.handleQuery,onAction:this.handleAction,onChangePage:this.handleChangePage,onBulkAction:this.handleBulkAction,$$editable:S})},t.prototype.renderHeaderToolbar=function(e,t){var r=this.props,n=r.toolbar,i=r.toolbarInline,o=r.headerToolbar;return n&&(o=Array.isArray(o)?i?o.concat(n):[o,n]:o?[o,n]:n),this.renderToolbar(o||[],0,e,t)},t.prototype.renderFooterToolbar=function(e,t){var r=this.props,n=r.toolbar,i=r.toolbarInline,o=r.footerToolbar;return n&&(o=Array.isArray(o)?i?o.concat(n):[o,n]:o?[o,n]:n),this.renderToolbar(o,0,e,t)},t.prototype.renderTag=function(e,t){var r=this.props,n=r.classnames,o=r.labelField,a=r.labelTpl,l=r.primaryField,s=r.valueField,c=(r.translate,r.env),d=r.itemCheckableOn,u=!d||(0,h.fz_)(d,e);return i.createElement("div",{key:t,className:n("Crud-value",u?"":"is-disabled")},i.createElement("span",{className:n("Crud-valueIcon"),onClick:this.unSelectItem.bind(this,e,t)},"\xd7"),i.createElement("span",{className:n("Crud-valueLabel")},a?i.createElement(v.Vt,{html:(0,h.hXT)(a,e),filterHtml:c.filterHtml}):(0,h.E04)(e,o||"label")||(0,h.E04)(e,s||l||"id")))},t.prototype.renderSelection=function(){var e=this,t=this.props,r=t.store,o=t.classPrefix,a=t.classnames,l=(t.labelField,t.labelTpl,t.primaryField,t.valueField,t.translate),s=(t.env,t.popOverContainer),c=t.multiple,d=t.maxTagCount,u=t.overflowTagPopover,p=t.keepItemSelectionOnPageChange;if(!r.selectedItems.length||!p||!1===c)return null;var f=r.selectedItems.length,m=r.selectedItems,g=!1!==c&&(0,h.wYV)(d,{start:0,end:f,left:"inclusive",right:"exclusive"});return g&&(m=(0,n.ev)((0,n.ev)([],(0,n.CR)(r.selectedItems.slice(0,d)),!1),[{label:"+ ".concat(f-d," ..."),value:"__overflow_tag__"}],!1)),i.createElement("div",{className:a("Crud-selection")},i.createElement("div",{className:a("Crud-selectionLabel")},l("CRUD.selected",{total:r.selectedItems.length})),m.map(function(t,c){return g&&c===d?i.createElement(v.pf,{key:c,container:s,tooltip:(0,n.pi)((0,n.pi)({placement:"top",trigger:"hover",showArrow:!1,offset:[0,-10],tooltipClassName:a("Crud-selection-overflow",null==u?void 0:u.tooltipClassName),title:l("已选项")},y()(u,["children","content","tooltipClassName"])),{children:function(){return i.createElement("div",{className:a("".concat(o,"Crud-selection-overflow-wrapper"))},r.selectedItems.slice(d,f).map(function(t,r){var n=r+d;return e.renderTag(t,n)}))}})},i.createElement("div",{key:c,className:a("Crud-value")},i.createElement("span",{className:a("Crud-valueLabel")},t.label))):e.renderTag(t,c)}),i.createElement("a",{onClick:this.clearSelection,className:a("Crud-selectionClear")},l("clear")))},t.prototype.renderFilter=function(){var e,t=this.props,r=t.store,i=t.render,o=t.classnames,a=t.filter,l=t.translate,s=t.testIdBuilder,c=t.filterCanAccessSuperData;return a||r.filterTogggable&&!r.filterVisible?i("filter",(0,n.pi)((0,n.pi)({title:l("CRUD.filter"),mode:"inline",submitText:l("search")},a),{type:"form",api:null,testIdBuilder:null==s?void 0:s.getChild("filter")}),{key:"filter",panelClassName:o("Crud-filter",a.panelClassName||"Panel--default"),data:r.filterData,onReset:this.handleFilterReset,onSubmit:this.handleFilterSubmit,onInit:this.handleFilterInit,formStore:void 0,canAccessSuperData:null!=(e=null==a?void 0:a.canAccessSuperData)?e:void 0===c||c}):null},t.prototype.filterItemIndex=function(e){var t,r=this.props.store,n="".concat(e).split(".").map(function(e){return parseInt(e,10)});if(!Array.isArray(r.data.items))return e;var i=null==(t=r.data.items)?void 0:t[n[0]];return i&&(n[0]=r.items.findIndex(function(e){return(e.__pristine||e)===(i.__pristine||i)})),n.join(".")},t.prototype.filterBodySchema=function(e){return e},t.prototype.renderBody=function(){var e,t=this.props,r=(t.className,t.style,t.bodyClassName),i=t.filter,o=t.render,a=t.store,l=t.mode,s=(t.syncLocation,t.children,t.bulkActions),c=t.pickerMode,d=t.multiple,u=t.strictMode,p=t.valueField,h=t.primaryField,v=(t.value,t.hideQuickSaveBtn),f=t.itemActions,m=t.classnames,g=t.keepItemSelectionOnPageChange,b=t.maxKeepItemSelectionLength,y=t.maxItemSelectionLength,C=(t.onAction,t.popOverContainer),S=(t.translate,t.onQuery,t.autoGenerateFilter),F=(t.onSelect,t.autoFillHeight),P=t.onEvent,T=(t.onSave,t.onSaveOrder,t.onPopOverOpened,t.onPopOverClosed,t.onSearchableFromReset,t.onSearchableFromSubmit,t.onSearchableFromInit,t.headerToolbarRender,t.footerToolbarRender,t.testIdBuilder),I=t.id,A=t.filterCanAccessSuperData,k=t.selectable,O=(0,n._T)(t,["className","style","bodyClassName","filter","render","store","mode","syncLocation","children","bulkActions","pickerMode","multiple","strictMode","valueField","primaryField","value","hideQuickSaveBtn","itemActions","classnames","keepItemSelectionOnPageChange","maxKeepItemSelectionLength","maxItemSelectionLength","onAction","popOverContainer","translate","onQuery","autoGenerateFilter","onSelect","autoFillHeight","onEvent","onSave","onSaveOrder","onPopOverOpened","onPopOverClosed","onSearchableFromReset","onSearchableFromSubmit","onSearchableFromInit","headerToolbarRender","footerToolbarRender","testIdBuilder","id","filterCanAccessSuperData","selectable"]);return o("body",(0,n.pi)((0,n.pi)({},this.filterBodySchema(O)),{id:I,onEvent:this.filterOnEvent(P),columns:null!=(e=a.columns)?e:O.columns,type:l||"table"}),{key:"body",className:m("Crud-body",r),ref:this.controlRef,autoGenerateFilter:!i&&S,filterCanAccessSuperData:void 0===A||A,autoFillHeight:F,selectable:!!(this.hasBulkActionsToolbar()&&this.hasBulkActions()||c||void 0!==k&&k),itemActions:f,multiple:void 0===d?!!s&&s.length>0:d,selected:a.selectedItemsAsArray,strictMode:u,keepItemSelectionOnPageChange:g,maxKeepItemSelectionLength:b,maxItemSelectionLength:y,valueField:p||h,primaryField:h,hideQuickSaveBtn:v,items:a.data.items,fullItems:a.itemsAsArray,query:a.query,orderBy:a.query.orderBy,orderDir:a.query.orderDir,popOverContainer:C,onAction:this.handleAction,onItemChange:this.handleItemChange,onSave:this.handleSave,onSaveOrder:this.handleSaveOrder,onQuery:this.handleQuery,onSelect:this.handleSelect,onPopOverOpened:this.handleChildPopOverOpen,onPopOverClosed:this.handleChildPopOverClose,onSearchableFromReset:this.handleFilterReset,onSearchableFromSubmit:this.handleFilterSubmit,onSearchableFromInit:this.handleFilterInit,headerToolbarRender:this.renderHeaderToolbar,footerToolbarRender:this.renderFooterToolbar,data:a.mergedData,loading:a.loading,host:this,filterItemIndex:this.filterItemIndex,onDbClick:this.props.rowDbClick,testIdBuilder:null==T?void 0:T.getChild("body")})},t.prototype.render=function(){var e=this.props,t=e.className,r=e.style,o=e.render,a=e.store,l=e.classnames,s=(e.translate,e.testIdBuilder),c=e.id;return i.createElement("div",(0,n.pi)({className:l("Crud",t,{"is-loading":a.loading,"is-mobile":(0,h.tqC)()}),style:r,"data-id":c,"data-role":"container"},null==s?void 0:s.getChild("wrapper").getTestId()),this.renderFilter(),this.renderSelection(),this.renderBody(),o("dialog",(0,n.pi)((0,n.pi)({},a.action&&a.action.dialog),{type:"dialog"}),{key:"dialog",data:a.dialogData,onConfirm:this.handleDialogConfirm,onClose:this.handleDialogClose,show:a.dialogOpen}))},t.propsList=["bulkActions","itemActions","mode","orderField","syncLocation","toolbar","toolbarInline","messages","value","options","multiple","valueField","defaultParams","bodyClassName","perPageAvailable","pageField","perPageField","pageDirectionField","hideQuickSaveBtn","autoJumpToTopOnPagerChange","interval","silentPolling","stopAutoRefreshWhen","stopAutoRefreshWhenModalIsOpen","api","affixHeader","columnsTogglable","placeholder","tableClassName","headerClassName","footerClassName","headerToolbar","footerToolbar","filterTogglable","filterDefaultVisible","autoGenerateFilter","syncResponse2Query","keepItemSelectionOnPageChange","labelTpl","labelField","loadDataOnce","loadDataOnceFetchOnFilter","source","header","columns","size","onChange","onInit","onSaved","onSave","onQuery","formStore","autoFillHeight","maxTagCount","overflowTagPopover","parsePrimitiveQuery","matchFunc"],t.defaultProps={toolbarInline:!0,headerToolbar:["bulkActions"],footerToolbar:["statistics","pagination"],primaryField:"id",syncLocation:!0,pageField:"page",perPageField:"perPage",pageDirectionField:"pageDir",hideQuickSaveBtn:!1,autoJumpToTopOnPagerChange:!0,silentPolling:!1,filterTogglable:!1,filterDefaultVisible:!0,loadDataOnce:!1,autoFillHeight:!1,parsePrimitiveQuery:!0},t}(i.Component),D=function(e){function t(t,r){var n=e.call(this,t)||this;return r.registerComponent(n),n}return(0,n.ZT)(t,e),t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.context.unRegisterComponent(this)},t.prototype.reload=function(t,r,n,i,o,a){var l,s=this.context;return(null==a?void 0:a.index)||(null==a?void 0:a.condition)?null==(l=this.control)?void 0:l.reload("",r,n,void 0,void 0,a):t?s.reload(r?"".concat(t,"?").concat((0,h.mUA)(r)):t,n):e.prototype.reload.call(this,t,r,n,i,o,a)},t.prototype.receive=function(t,r,i,o,a){return(0,n.mG)(this,void 0,void 0,function(){var l;return(0,n.Jh)(this,function(n){return(l=this.context,r)?[2,l.send(r,t)]:[2,e.prototype.receive.call(this,t,void 0,i,o,a)]})})},t.prototype.reloadTarget=function(e,t){this.context.reload(e,t)},t.prototype.closeTarget=function(e){this.context.close(e)},t.prototype.setData=function(e,t,r,i){var o,a,l;return(0,n.mG)(this,void 0,void 0,function(){var s,c,d;return(0,n.Jh)(this,function(u){return(s=this.props.store,void 0!==r||void 0!==i)?[2,null==(a=null==(o=this.control)?void 0:o.setData)?void 0:a.call(o,e,t,r,i)]:(c=(null==e?void 0:e.total)||(null==e?void 0:e.count),d=null!=(l=e.rows)?l:e.items,void 0!==c&&s.updateTotal(parseInt(c,10)),[2,s.updateData((0,n.pi)((0,n.pi)({},e),d?{items:d}:{}),void 0,t)])})})},t.prototype.getData=function(){var e=this.props,t=e.store,r=e.data;return t.getData(r)},t.contextType=h.ZHe,t}(O),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,n.ZT)(t,e),t=(0,n.gn)([(0,h.Thl)({type:"crud",storeType:h.qh2.name,isolateScope:!0})],t)}(D)},2226:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},24465:function(e,t,r){var n=r(5673),i=r(2226),o=r(12557);e.exports=function(e,t){return o(e,i(n(t)))}},86974:function(e,t,r){e.exports=r(88770)(function(e,t,r){e[+!r].push(t)},function(){return[[],[]]})},12557:function(e,t,r){var n=r(75697),i=r(5673),o=r(32648),a=r(21699);e.exports=function(e,t){if(null==e)return{};var r=n(a(e),function(e){return[e]});return t=i(t),o(e,r,function(e,r){return t(e,r[0])})}}}]);