"use strict";(self.webpackChunkvue2_demo=self.webpackChunkvue2_demo||[]).push([["5720"],{67590:function(e,t,n){n.r(t),n.d(t,{EmailControlRenderer:()=>C,TextControlRenderer:()=>f,UrlControlRenderer:()=>g,default:()=>m,mapItemIndex:()=>v});var a=n(9787),i=n(65758),s=n(17949),l=n(8427),o=n(66292),r=n.n(o),u=n(33170),p=n.n(u),c=n(47755),d=n(68333),h=n(81415),m=function(e){function t(t){var n=e.call(this,t)||this,a=t.value;return n.state={isOpen:!1,inputValue:t.multiple||!1===t.creatable?"":n.valueToString(a),isFocused:!1,revealPassword:!1},n.focus=n.focus.bind(n),n.clearValue=n.clearValue.bind(n),n.toggleRevealPassword=n.toggleRevealPassword.bind(n),n.inputRef=n.inputRef.bind(n),n.handleClick=n.handleClick.bind(n),n.handleFocus=n.handleFocus.bind(n),n.handleBlur=n.handleBlur.bind(n),n.handleInputChange=n.handleInputChange.bind(n),n.handleKeyDown=n.handleKeyDown.bind(n),n.handleChange=n.handleChange.bind(n),n.handleStateChange=n.handleStateChange.bind(n),n.loadAutoComplete=r()(n.loadAutoComplete.bind(n),250,{trailing:!0,leading:!1}),n}return(0,a.ZT)(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.formItem,i=t.autoComplete,s=t.addHook,l=t.formInited,o=t.data,r=t.name;(0,c.X1t)(i,o)&&n&&(l?n.loadOptions(i,(0,c.nW9)(o,{term:""})):s&&(this.unHook=s(function(t){return(0,a.mG)(e,void 0,void 0,function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,n.loadOptions(i,(0,c.nW9)(t,{term:""}))];case 1:return e.sent(),n.value&&(0,c.NI0)(t,r,n.value),[2]}})})},"init")))},t.prototype.componentDidUpdate=function(e){var t=this.props;e.value!==t.value&&this.setState({inputValue:t.multiple||!1===t.creatable?"":this.valueToString(t.value)}),e.revealPassword!==t.revealPassword&&(t.revealPassword||this.setState({revealPassword:!1}))},t.prototype.componentWillUnmount=function(){this.unHook&&this.unHook()},t.prototype.inputRef=function(e){this.input=e},t.prototype.doAction=function(e,t,n,a){void 0===n&&(n=!1);var i=null==e?void 0:e.actionType;"reset"===i?this.resetValue():"clear"===i?this.clearValue():"focus"===i?this.focus():"review"===i?this.setState({revealPassword:!0}):"encrypt"===i&&this.setState({revealPassword:!1})},t.prototype.focus=function(){if(this.input){this.input.focus();var e=this.input.value.length;e&&("email"===this.input.type?(this.input.type="text",this.input.setSelectionRange(e,e),this.input.type="email"):this.input.setSelectionRange(e,e))}},t.prototype.resetValue=function(){var e,t;return(0,a.mG)(this,void 0,void 0,function(){var n,i,s,l,o,r,u,p,d,h=this;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return i=(n=this.props).onChange,s=n.dispatchEvent,l=n.resetValue,o=n.formStore,r=n.store,u=n.name,p=null!=(t=(0,c.E04)(null!=(e=null==o?void 0:o.pristine)?e:null==r?void 0:r.pristine,u))?t:l,[4,s("change",(0,c.vXk)(this.props,{value:p}))];case 1:if(null==(d=a.sent())?void 0:d.prevented)return[2];return i(p),this.setState({inputValue:p},function(){h.loadAutoComplete()}),[2]}})})},t.prototype.clearValue=function(){return(0,a.mG)(this,void 0,void 0,function(){var e,t,n,i,s,l,o,r=this;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return t=(e=this.props).onChange,n=e.dispatchEvent,i=e.clearValueOnEmpty,s=this.props.resetValue,i&&""===s&&(s=void 0),[4,n("clear",(0,c.vXk)(this.props,{value:s}))];case 1:if(null==(l=a.sent())?void 0:l.prevented)return[2];return[4,n("change",(0,c.vXk)(this.props,{value:s}))];case 2:if(null==(o=a.sent())?void 0:o.prevented)return[2];return t(s),this.setState({inputValue:s},function(){r.loadAutoComplete()}),[2]}})})},t.prototype.removeItem=function(e){var t=this.props,n=t.selectedOptions,a=t.onChange,i=n.concat();i.splice(e,1),a(this.normalizeValue(i))},t.prototype.handleClick=function(){return(0,a.mG)(this,void 0,void 0,function(){var e,t,n,i;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return t=(e=this.props).dispatchEvent,n=e.value,[4,t("click",(0,c.vXk)(this.props,{value:n}))];case 1:if(null==(i=a.sent())?void 0:i.prevented)return[2];return this.state.isFocused||this.focus(),this.setState({isOpen:!0}),[2]}})})},t.prototype.handleFocus=function(e){return(0,a.mG)(this,void 0,void 0,function(){var t,n,i,s,l;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=(t=this.props).dispatchEvent,i=t.onFocus,s=t.value,this.setState({isOpen:!0,isFocused:!0}),[4,n("focus",(0,c.vXk)(this.props,{value:s}))];case 1:if(null==(l=a.sent())?void 0:l.prevented)return[2];return null==i||i(e),[2]}})})},t.prototype.handleBlur=function(e){return(0,a.mG)(this,void 0,void 0,function(){var t,n,i,s,l,o,r,u=this;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=(t=this.props).onBlur,i=t.trimContents,s=t.value,l=t.onChange,o=t.dispatchEvent,this.setState({isFocused:!1},function(){if(i&&s&&"string"==typeof s){var e=s.trim();u.input&&(u.input.value=e),l(e)}}),[4,o("blur",(0,c.vXk)(this.props,{value:s}))];case 1:if(null==(r=a.sent())?void 0:r.prevented)return[2];return n&&n(e),[2]}})})},t.prototype.close=function(){this.setState({isFocused:!1})},t.prototype.handleInputChange=function(e){return(0,a.mG)(this,void 0,void 0,function(){var t,n,i,s,l,o,r=this;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return t=this.transformValue(e.currentTarget.value),i=(n=this.props).creatable,s=n.multiple,l=n.onChange,[4,(0,n.dispatchEvent)("change",(0,c.vXk)(this.props,{value:t}))];case 1:if(null==(o=a.sent())?void 0:o.prevented)return[2];return this.setState({inputValue:t},function(){!1===i||s||null==l||l(t),r.loadAutoComplete()}),[2]}})})},t.prototype.handleKeyDown=function(e){var t;return(0,a.mG)(this,void 0,void 0,function(){var n,i,s,l,o,r,u,d,h,m;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(i=(n=this.props).selectedOptions,s=n.onChange,l=n.multiple,o=n.creatable,r=n.dispatchEvent,u=(null==(t=this.props)?void 0:t.valueField)||"value",!(i.length&&!this.state.inputValue&&8===e.keyCode))return[3,1];return e.preventDefault(),(d=i.concat()).pop(),s(this.normalizeValue(d)),this.setState({inputValue:""},this.loadAutoComplete),[3,4];case 1:if(!("Enter"===e.key&&this.state.inputValue&&"number"!=typeof this.highlightedIndex&&!1!==o))return[3,3];return e.preventDefault(),h=this.state.inputValue,l&&h&&(p()(i,function(e){return e[u]==h})?h=this.normalizeValue(i).concat():((d=i.concat()).push({label:h,value:h}),h=this.normalizeValue(d).concat())),[4,r("enter",(0,c.vXk)(this.props,{value:h}))];case 2:if(null==(m=a.sent())?void 0:m.prevented)return[2];return s(h),this.setState({inputValue:l?"":h,isOpen:!1},this.loadAutoComplete),[3,4];case 3:"Enter"===e.key&&this.state.isOpen&&"number"!=typeof this.highlightedIndex&&this.setState({isOpen:!1}),a.label=4;case 4:return[2]}})})},t.prototype.handleChange=function(e){var t=this.props,n=t.onChange,a=t.multiple,i=t.options,s=t.selectedOptions,l=t.creatable,o=t.valueField,r=i.find(function(t){return t[o||"value"]===e});if(a){var u=s.concat();r&&u.push(r),n(this.normalizeValue(u))}else n(r?this.normalizeValue(r):e);(a||!1===l)&&this.setState({inputValue:""},this.loadAutoComplete)},t.prototype.handleStateChange=function(e){var t=this.props.creatable,n=this.props.multiple||this.props.multi;switch(e.type){case s.ZP.stateChangeTypes.itemMouseEnter:case s.ZP.stateChangeTypes.changeInput:this.setState({isOpen:!0});break;default:var a={};void 0!==e.isOpen&&(a.isOpen=e.isOpen),void 0!==e.highlightedIndex&&(this.highlightedIndex=e.highlightedIndex),!n&&!1===t&&this.state.isOpen&&!1===e.isOpen&&(a.inputValue=""),this.setState(a)}},t.prototype.handleNormalInputChange=function(e){return(0,a.mG)(this,void 0,void 0,function(){var t,n,i,s,l,o,r;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=(t=this.props).onChange,i=t.dispatchEvent,s=t.trimContents,l=t.clearValueOnEmpty,"string"==typeof(o=this.transformValue(e.currentTarget.value))&&(s&&(o=o.trim()),l&&""===o&&(o=void 0)),[4,i("change",(0,c.vXk)(this.props,{value:o}))];case 1:if(null==(r=a.sent())?void 0:r.prevented)return[2];return n(o),[2]}})})},t.prototype.normalizeValue=function(e){var t=this.props,n=t.multiple,a=t.delimiter,i=t.joinValues,s=t.extractValue,l=t.valueField,o=Array.isArray(e)?e:e?[e]:[];if(i)return o.map(function(e){return e[l||"value"]}).join(a||",");if(!s)return n?o:o[0];var r=o.map(function(e){return e[l||"value"]});return n?r:r[0]},t.prototype.transformValue=function(e){var t=this.props.transform;return t&&Object.keys(t).forEach(function(n){var a=t[n];switch(n){case"lowerCase":a&&(e=e.toLowerCase());break;case"upperCase":a&&(e=e.toUpperCase())}}),e},t.prototype.loadAutoComplete=function(){var e=this.props,t=e.formItem,n=e.autoComplete,a=e.data;(0,c.X1t)(n,a)&&t&&t.loadOptions(n,(0,c.nW9)(a,{term:this.state.inputValue||""}),{extendsOptions:!0})},t.prototype.reload=function(){var e=this.props.reloadOptions;e&&e()},t.prototype.valueToString=function(e){return null==e?"":"string"==typeof e?e:e instanceof Date?e.toISOString():JSON.stringify(e)},t.prototype.getTarget=function(){var e;return null==(e=this.input)?void 0:e.parentElement},t.prototype.renderSugestMode=function(){var e,t=this,n=this.props,o=n.className,r=(n.style,n.inputControlClassName),u=n.nativeInputClassName,p=n.inputOnly,h=n.value,m=n.placeholder,f=n.classnames,C=n.disabled,g=n.readOnly,y=n.name,b=n.loading,w=n.clearable,x=n.options,T=n.selectedOptions,N=n.autoComplete,O=n.labelField,E=n.valueField,V=n.multiple,I=n.creatable,k=n.borderMode,S=n.showCounter,P=n.data,F=n.maxLength,A=n.minLength,J=n.translate,X=n.loadingConfig,G=n.popOverContainer,B=n.themeCss,Z=n.css,R=n.id,z=n.nativeAutoComplete,L=n.testIdBuilder,j=null==(e=this.props.type)?void 0:e.replace(/^(?:native|input)\-/,"");return i.createElement(s.ZP,{isOpen:this.state.isOpen&&!C&&!g,inputValue:this.state.inputValue,onChange:this.handleChange,onStateChange:this.handleStateChange,selectedItem:T.map(function(e){return e[E||"value"]})},function(e){var n,s,D,M=e.getInputProps,W=e.getItemProps,Q=e.isOpen,H=e.inputValue,K=e.selectedItem,U=e.highlightedIndex,$=H&&Q&&!N?(0,l.Lu)(x,H,{keys:[O||"label",E||"value"],threshold:l.Lu.rankings.CONTAINS}):x,_=Q?v($,K):{};$=$.filter(function(e){return!~K.indexOf(e.value)}),t.state.inputValue&&!1!==I&&V&&!$.some(function(e){return e.value===t.state.inputValue})&&!~K.indexOf(t.state.inputValue)&&$.push(((n={})[O||"label"]=t.state.inputValue,n[E||"value"]=t.state.inputValue,n.isNew=!0,n));var q=(0,c.hXT)(m,P);return i.createElement("div",(0,a.pi)({className:f("TextControl-input TextControl-input--withAC",r,(0,c.GwQ)((0,a.pi)((0,a.pi)({},t.props),{name:"inputControlClassName",id:R,themeCss:B||Z})),(0,c.GwQ)((0,a.pi)((0,a.pi)({},t.props),{name:"inputControlClassName",id:R,themeCss:B||Z,extra:"inner"})),p?o:"",((s={"is-opened":Q,"TextControl-input--multiple":V})["TextControl-input--border".concat((0,c.zfV)(k))]=k,s)),onClick:t.handleClick},null==L?void 0:L.getTestId()),i.createElement(i.Fragment,null,!q||T.length||t.state.inputValue||t.state.isFocused?null:i.createElement("div",{className:f("TextControl-placeholder")},q),T.map(function(e,n){return V?i.createElement("div",{className:f("TextControl-value"),key:n},i.createElement(d.m,{className:f("TextControl-valueLabel"),tooltip:"".concat(e[O||"label"])},"".concat(e[O||"label"])),i.createElement(d.JO,{icon:"close",className:f("TextControl-valueIcon","icon"),onClick:t.removeItem.bind(t,n)})):H&&Q||!1!==I?null:i.createElement("div",{className:f("TextControl-value"),key:n},e.label)}),i.createElement(d.II,(0,a.pi)({},M({name:y,ref:t.inputRef,disabled:C,readOnly:g,type:j,onFocus:t.handleFocus,onBlur:t.handleBlur,onChange:t.handleInputChange,onKeyDown:t.handleKeyDown,maxLength:F,minLength:A}),{autoComplete:z,size:10,className:f(u)}))),w&&!C&&!g&&h?i.createElement("a",{onClick:t.clearValue,className:f("TextControl-clear")},i.createElement(d.JO,{icon:"input-clear",className:"icon",iconContent:"InputText-clear"})):null,S?i.createElement("span",{className:f("TextControl-counter")},"".concat(null==(D=t.valueToString(h))?void 0:D.length).concat("number"==typeof F&&F?"/".concat(F):"")):null,b?i.createElement(d.$j,{show:!0,icon:"reload",size:"sm",spinnerClassName:f("TextControl-spinner"),loadingConfig:X}):null,i.createElement(c.aVW,{container:G||t.getTarget,target:t.getTarget,show:!!(Q&&$.length)},i.createElement(c.v$m,{className:f("TextControl-popover"),style:{width:t.input?t.input.parentElement.offsetWidth:"auto"}},i.createElement("div",{className:f("TextControl-sugs")},$.map(function(e){var t=e[O||"label"],n=e[E||"value"];return i.createElement("div",(0,a.pi)({},W({item:n,disabled:e.disabled,className:f("TextControl-sugItem",{"is-highlight":U===_[n],"is-disabled":e.disabled||e.readOnly})}),{key:n}),e.isNew?i.createElement("span",null,J("Text.add",{label:t}),i.createElement(d.JO,{icon:"enter",className:"icon"})):i.createElement("span",null,e.disabled?t:(0,c.CHQ)(t,H),e.tip))})))))})},t.prototype.toggleRevealPassword=function(){return(0,a.mG)(this,void 0,void 0,function(){var e,t,n,i;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return t=(e=this.props).dispatchEvent,n=e.value,[4,t(this.state.revealPassword?"encrypt":"review",(0,c.vXk)(this.props,{value:n}))];case 1:if((null==(i=a.sent())?void 0:i.prevented)||(null==i?void 0:i.stoped))return[2];return this.setState({revealPassword:!this.state.revealPassword}),[2]}})})},t.prototype.renderNormal=function(){var e,t,n,s=this.props,l=(s.classPrefix,s.classnames),o=s.className,r=(s.style,s.inputControlClassName),u=s.nativeInputClassName,p=s.inputOnly,h=s.value,m=s.placeholder,v=(s.onChange,s.disabled),f=s.readOnly,C=s.max,g=s.min,y=s.step,b=s.clearable,w=s.revealPassword,x=void 0===w||w,T=s.name,N=s.borderMode,O=s.prefix,E=s.suffix,V=s.data,I=s.showCounter,k=s.maxLength,S=s.minLength,P=s.themeCss,F=s.css,A=s.id,J=s.nativeAutoComplete,X=s.testIdBuilder,G=null==(t=this.props.type)?void 0:t.replace(/^(?:native|input)\-/,"");return i.createElement("div",(0,a.pi)({className:l("TextControl-input",((e={})["TextControl-input--border".concat((0,c.zfV)(N))]=N,e),(0,c.GwQ)((0,a.pi)((0,a.pi)({},this.props),{name:"inputControlClassName",id:A,themeCss:P||F})),(0,c.GwQ)((0,a.pi)((0,a.pi)({},this.props),{name:"inputControlClassName",id:A,themeCss:P||F,extra:"inner"})),r,p?o:"")},null==X?void 0:X.getTestId()),O?i.createElement("span",{className:l("TextControl-inputPrefix")},(0,c.hXT)(O,V)):null,i.createElement(d.II,(0,a.pi)({name:T,placeholder:(0,c.hXT)(m,V),ref:this.inputRef,disabled:v,readOnly:f,type:this.state.revealPassword?"text":G,onFocus:this.handleFocus,onBlur:this.handleBlur,max:C,min:g,maxLength:k,minLength:S,autoComplete:J,size:10,step:y,onChange:this.handleNormalInputChange,value:this.valueToString(h),className:l(u,{"TextControl-input-password":"password"===G&&x})},null==X?void 0:X.getChild("input").getTestId())),b&&!v&&!f&&h?i.createElement("a",{onClick:this.clearValue,className:l("TextControl-clear")},i.createElement(d.JO,{icon:"input-clear",className:"icon",iconContent:"InputText-clear"})):null,"password"===G&&x&&!v?i.createElement("a",{onClick:this.toggleRevealPassword,className:l("TextControl-revealPassword")},this.state.revealPassword?i.createElement(d.JO,{icon:"view",className:l("TextControl-icon-view"),classNameProp:l("TextControl-icon-view"),iconContent:"InputText-view"}):i.createElement(d.JO,{icon:"invisible",className:l("TextControl-icon-invisible"),classNameProp:l("TextControl-icon-invisible"),iconContent:"InputText-invisible"})):null,I?i.createElement("span",{className:l("TextControl-counter")},"".concat(null==(n=this.valueToString(h))?void 0:n.length).concat("number"==typeof k&&k?"/".concat(k):"")):null,E?i.createElement("span",{className:l("TextControl-inputSuffix")},(0,c.hXT)(E,V)):null)},t.prototype.renderBody=function(e){var t,n,s=this.props,l=s.classnames,o=s.className,r=s.style,u=s.classPrefix,p=s.addOn,h=s.render,m=s.data,v=s.disabled,f=s.readOnly,C=s.inputOnly,g=s.static,y=s.addOnClassName,b=s.themeCss,w=s.css,x=s.id,T="string"==typeof p?{label:p,type:"plain"}:p,N=i.createElement(d.JO,{cx:l,icon:null==T?void 0:T.icon,className:"Icon"}),O=T&&!g?T.actionType||~["button","submit","reset","action"].indexOf(T.type)?i.createElement("div",{className:l("".concat(u,"TextControl-button"),y,(0,c.GwQ)((0,a.pi)((0,a.pi)({},this.props),{name:"addOnClassName",id:x,themeCss:b||w,extra:"addOn"})))},h("addOn",T,{disabled:v})):i.createElement("div",{className:l("".concat(u,"TextControl-addOn"),y,(0,c.GwQ)((0,a.pi)((0,a.pi)({},this.props),{name:"addOnClassName",id:x,themeCss:b||w,extra:"addOn"})))},N,T.label?(0,c.hXT)(T.label,m):null):null;if(C)return e;var E=g?l("".concat(u,"TextControl"),((n={})["".concat(u,"TextControl--withAddOn")]=!!O,n)):l(o,"".concat(u,"TextControl"),((t={})["".concat(u,"TextControl--withAddOn")]=!!O,t["is-focused"]=this.state.isFocused,t["is-disabled"]=v||f,t));return i.createElement("div",{className:E,style:r},T&&"left"===T.position?O:null,e,T&&"left"!==T.position?O:null)},t.prototype.render=function(){var e=this.props,t=e.options,n=e.source,s=e.autoComplete,l=e.themeCss,o=e.css,r=e.id,u=e.env,p=e.classPrefix,d=!1!==s&&(n||(null==t?void 0:t.length)||s)?this.renderSugestMode():this.renderNormal();return i.createElement(i.Fragment,null,this.renderBody(d),i.createElement(c.cWM,(0,a.pi)({},this.props,{config:{themeCss:l||o,classNames:[{key:"inputControlClassName",weights:{focused:{parent:".".concat(p,"TextControl.is-focused")},disabled:{parent:".".concat(p,"TextControl.is-disabled")}}}],id:r},env:u})),i.createElement(c.cWM,(0,a.pi)({},this.props,{config:{themeCss:(0,c.$4Z)(l||o),classNames:[{key:"inputControlClassName",weights:{default:{inner:"input"},hover:{inner:"input"},focused:{parent:".".concat(p,"TextControl.is-focused"),inner:"input"},disabled:{parent:".".concat(p,"TextControl.is-disabled"),inner:"input"}}}],id:r&&r+"-inner"},env:u})),i.createElement(c.cWM,(0,a.pi)({},this.props,{config:{themeCss:l||o,classNames:[{key:"addOnClassName"}],id:r&&r+"-addOn"},env:u})))},t.defaultProps={resetValue:"",labelField:"label",valueField:"value",placeholder:"",allowInputText:!0,trimContents:!0,nativeAutoComplete:"off"},(0,a.gn)([c.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",void 0)],t.prototype,"close",null),(0,a.gn)([c.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[Object]),(0,a.w6)("design:returntype",Promise)],t.prototype,"handleNormalInputChange",null),(0,a.gn)([c.NjZ,(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",void 0)],t.prototype,"getTarget",null),(0,a.gn)([c.NjZ,(0,h.i)(),(0,a.w6)("design:type",Function),(0,a.w6)("design:paramtypes",[]),(0,a.w6)("design:returntype",Object)],t.prototype,"render",null),t}(i.PureComponent);function v(e,t,n){return void 0===n&&(n="value"),e.filter(function(e){return -1===t.indexOf(e[n||"value"])}).reduce(function(e,t,a){return e[t[n||"value"]]=a,e},{})}var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t=(0,a.gn)([(0,c.oZB)({type:"input-text",alias:["input-password","native-date","native-time","native-number"]})],t)}(m),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t=(0,a.gn)([(0,c.oZB)({type:"input-email",validations:"isEmail"})],t)}(m),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,a.ZT)(t,e),t=(0,a.gn)([(0,c.oZB)({type:"input-url",validations:"isUrl"})],t)}(m)}}]);