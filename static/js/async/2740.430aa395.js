"use strict";(self.webpackChunkvue2_amis=self.webpackChunkvue2_amis||[]).push([["2740"],{70346:function(t,e,i){i.r(e),i.d(e,{RadiosControlRenderer:()=>h,default:()=>p});var n=i(9787),o=i(65758),s=i(47755),r=i(81415),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.highlightIndex=-1,e.prevIndex=-1,e}return(0,n.ZT)(e,t),e.prototype.chartRef=function(t){var e,i=this;this.chart=t,null==(e=this.chart)||e.on("click","series",function(t){i.props.onToggle(i.props.options[t.dataIndex])}),setTimeout(function(){return i.highlight()})},e.prototype.highlight=function(t){void 0===t&&(t=this.highlightIndex),!this.props.static&&(this.highlightIndex=t,this.chart&&this.prevIndex!==t&&(~this.prevIndex&&this.chart.dispatchAction({type:"downplay",seriesIndex:0,dataIndex:this.prevIndex}),~t&&(this.chart.dispatchAction({type:"highlight",seriesIndex:0,dataIndex:t}),this.props.showTooltipOnHighlight&&this.chart.dispatchAction({type:"showTip",seriesIndex:0,dataIndex:t})),this.prevIndex=t))},e.prototype.componentDidMount=function(){this.props.selectedOptions.length&&this.highlight(this.props.options.indexOf(this.props.selectedOptions[0]))},e.prototype.componentDidUpdate=function(){this.props.selectedOptions.length&&this.highlight(this.props.options.indexOf(this.props.selectedOptions[0]))},e.prototype.renderStatic=function(t){void 0===t&&(t="-"),this.prevIndex=-1,this.highlightIndex=-1;var e=this.props,i=e.options,n=void 0===i?[]:i,s=e.selectedOptions,r=e.labelField,p=e.valueField,h=void 0===p?"value":p,a=e.chartValueField;if(n.length&&s.length){var l=n.reduce(function(t,e){return t+e[a||h]},0);if(l>0){var c=(s[0][a||h]/l*100).toFixed(2);t="".concat(s[0][void 0===r?"label":r],"：").concat(c,"%")}}return o.createElement(o.Fragment,null,t)},e.prototype.render=function(){var t=this.props,e=t.options,i=t.labelField,o=t.chartValueField,s=t.valueField;return(0,t.render)("chart",{type:"chart"},{config:(0,n.pi)((0,n.pi)({legend:{top:10},tooltip:{formatter:function(t){return"".concat(t.name,"：").concat(t.value[o||s||"value"],"（").concat(t.percent,"%）")}},series:[{type:"pie",top:30,bottom:0}]},this.props.config),{dataset:{dimensions:[i||"label",o||s||"value"],source:e}}),chartRef:this.chartRef})},(0,n.gn)([s.NjZ,(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[Object]),(0,n.w6)("design:returntype",void 0)],e.prototype,"chartRef",null),(0,n.gn)([(0,r.i)(),(0,n.w6)("design:type",Function),(0,n.w6)("design:paramtypes",[]),(0,n.w6)("design:returntype",void 0)],e.prototype,"render",null),e}(o.Component),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,n.ZT)(e,t),e.defaultProps={multiple:!1},e=(0,n.gn)([(0,s.oZB)({type:"chart-radios",sizeMutable:!1})],e)}(p)}}]);